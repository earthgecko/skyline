<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Upgrading - Crucible to Ionosphere &mdash; Skyline 4.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="../_static/skyline.styles.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Upgrading - Etsy to Ionosphere" href="etsy-to-ionosphere.html" />
    <link rel="prev" title="Upgrading - py2 to py3" href="py2-to-py3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Skyline
          </a>
              <div class="version">
                4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../anomify-cutting-edge-skyline.html">Anomify - cutting edge Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running-in-python-virtualenv.html">Running Skyline in a Python virtualenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Upgrading</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="py2-to-py3.html">Upgrading - py2 to py3</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Upgrading - Crucible to Ionosphere</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#new-settings-py-variables">New settings.py variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modified-settings-py-docstrings">Modified settings.py docstrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clean-up-skyline-permissions">Clean up Skyline permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-your-mysql-skyline-database">Update your MySQL Skyline database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="etsy-to-ionosphere.html">Upgrading - Etsy to Ionosphere</a></li>
<li class="toctree-l2"><a class="reference internal" href="etsy-to-crucible.html">Upgrading - Etsy to Crucible</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#backup-your-redis">Backup your Redis!</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#backup-your-database">Backup your database!</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#upgrading-from-version-to-version">Upgrading from version to version</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#upgrading-from-the-etsy-version-of-skyline">Upgrading from the Etsy version of Skyline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-data-into-skyline.html">Getting data into Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alert-testing.html">Alert testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alerts.html">Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slack.html">slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monotonic-metrics.html">Strictly increasing monotonicity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../horizon.html">Horizon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analyzer.html">Analyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analyzer-optimizations.html">Analyzer Optimizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mirage.html">Mirage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../boundary.html">Boundary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crucible.html">Crucible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../panorama.html">Panorama</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webapp.html">Webapp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ionosphere.html">Ionosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ionosphere_echo.html">Ionosphere echo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ionosphere_inference.html">Ionosphere inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ionosphere_learn_repetitive_patterns.html">Ionosphere learning from repetitive patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tsfresh.html">tsfresh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../luminosity.html">Luminosity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flux.html">Flux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upload-data-to-flux.html">upload_data to Flux - EXPERIMENTAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prometheus.html">Prometheus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vortex.html">Vortex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thunder/index.html">Thunder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vista.html">Vista</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SNAB.html">SNAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_settings.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.EXTERNAL_SETTINGS</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../redis-integration.html">Redis integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rebrow.html"><span class="red">re</span><span class="brow">brow</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="../running-multiple-skylines.html">Running multiple Skyline instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="../skyline-and-friends.html">Skyline and friends</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tuning-tips.html">Tuning tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring-skyline.html">Monitoring Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../skyline_metrics.html"><span class="skyblue">Sky</span><span class="red">line</span> metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../opentelemetry.html">opentelemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Trouble shooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecated-docs/index.html">Deprecated docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats-new.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../skyline.html">skyline package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Skyline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Upgrading</a></li>
      <li class="breadcrumb-item active">Upgrading - Crucible to Ionosphere</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/upgrading/crucible-to-ionosphere.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="upgrading-crucible-to-ionosphere">
<h1>Upgrading - Crucible to Ionosphere<a class="headerlink" href="#upgrading-crucible-to-ionosphere" title="Permalink to this heading"></a></h1>
<p>This section covers the steps involved in upgrading an existing Skyline
implementation that is running on a Crucible branch version of Skyline (&gt;= 1.0.0)</p>
<section id="new-settings-py-variables">
<h2>New settings.py variables<a class="headerlink" href="#new-settings-py-variables" title="Permalink to this heading"></a></h2>
<p>There is new dedicated Ionosphere settings section with the additions of all the
new Ionosphere variables.</p>
</section>
<section id="modified-settings-py-docstrings">
<h2>Modified settings.py docstrings<a class="headerlink" href="#modified-settings-py-docstrings" title="Permalink to this heading"></a></h2>
<p>There are some changes in the ALERTS docstrings that cover pattern matching that
should be reviewed.</p>
</section>
<section id="clean-up-skyline-permissions">
<h2>Clean up Skyline permissions<a class="headerlink" href="#clean-up-skyline-permissions" title="Permalink to this heading"></a></h2>
<p>After restarting all your Skyline apps and verifying all is working, please
consider cleaning up any incorrect permissions that were set on the data
directories due to an octal bug that was introduced with the Crucible branch.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The below bash snippet needs the path to your Skyline directory and
is based on all your the app directories being subdirectories of this parent
directory, if your set up uses different directory paths for different apps,
please modify the as below snippet as appropriate for your setup.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># For example - YOUR_SKYLINE_DIR=&quot;/opt/skyline&quot;</span>
<span class="nv">YOUR_SKYLINE_DIR</span><span class="o">=</span><span class="s2">&quot;&lt;YOUR_SKYLINE_DIR&gt;&quot;</span>

ls<span class="w"> </span>-1<span class="w"> </span>/opt/<span class="s2">&quot;</span><span class="nv">$YOUR_SKYLINE_DIR</span><span class="s2">&quot;</span>/<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;crucible\|ionosphere\|mirage\|panaroma&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>i_dir
<span class="k">do</span>
<span class="w">  </span>chmod<span class="w"> </span><span class="m">0755</span><span class="w"> </span><span class="s2">&quot;/opt/</span><span class="si">${</span><span class="nv">YOUR_SKYLINE_DIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">i_dir</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span>find<span class="w"> </span><span class="s2">&quot;/opt/</span><span class="si">${</span><span class="nv">YOUR_SKYLINE_DIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">i_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-exec<span class="w"> </span>chmod<span class="w"> </span><span class="m">0755</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
<span class="w">  </span>find<span class="w"> </span><span class="s2">&quot;/opt/</span><span class="si">${</span><span class="nv">YOUR_SKYLINE_DIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">i_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-exec<span class="w"> </span>chmod<span class="w"> </span><span class="m">0644</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
<span class="k">done</span>
</pre></div>
</div>
</section>
<section id="update-your-mysql-skyline-database">
<h2>Update your MySQL Skyline database<a class="headerlink" href="#update-your-mysql-skyline-database" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Backup your Skyline MySQL DB.</p></li>
<li><p>Review and run the updates/sql/crucible_to_ionosphere.sql script against your
database again.  There are a few ALTERs and a number of new tables.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="py2-to-py3.html" class="btn btn-neutral float-left" title="Upgrading - py2 to py3" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="etsy-to-ionosphere.html" class="btn btn-neutral float-right" title="Upgrading - Etsy to Ionosphere" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2014, Etsy Inc; 2015, Abe Stanway; 2015-2023, Gary Wilson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>