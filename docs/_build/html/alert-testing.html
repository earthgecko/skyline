<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alert testing &mdash; Skyline 4.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/skyline.styles.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Alerts" href="alerts.html" />
    <link rel="prev" title="Getting data into Skyline" href="getting-data-into-skyline.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Skyline
          </a>
              <div class="version">
                4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="anomify-cutting-edge-skyline.html">Anomify - cutting edge Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="running-in-python-virtualenv.html">Running Skyline in a Python virtualenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-data-into-skyline.html">Getting data into Skyline</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Alert testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="alerts.html">Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="slack.html">slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="monotonic-metrics.html">Strictly increasing monotonicity</a></li>
<li class="toctree-l1"><a class="reference internal" href="horizon.html">Horizon</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzer.html">Analyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzer-optimizations.html">Analyzer Optimizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="mirage.html">Mirage</a></li>
<li class="toctree-l1"><a class="reference internal" href="boundary.html">Boundary</a></li>
<li class="toctree-l1"><a class="reference internal" href="crucible.html">Crucible</a></li>
<li class="toctree-l1"><a class="reference internal" href="panorama.html">Panorama</a></li>
<li class="toctree-l1"><a class="reference internal" href="webapp.html">Webapp</a></li>
<li class="toctree-l1"><a class="reference internal" href="ionosphere.html">Ionosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="ionosphere_echo.html">Ionosphere echo</a></li>
<li class="toctree-l1"><a class="reference internal" href="ionosphere_inference.html">Ionosphere inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="ionosphere_learn_repetitive_patterns.html">Ionosphere learning from repetitive patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsfresh.html">tsfresh</a></li>
<li class="toctree-l1"><a class="reference internal" href="luminosity.html">Luminosity</a></li>
<li class="toctree-l1"><a class="reference internal" href="flux.html">Flux</a></li>
<li class="toctree-l1"><a class="reference internal" href="upload-data-to-flux.html">upload_data to Flux - EXPERIMENTAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="prometheus.html">Prometheus</a></li>
<li class="toctree-l1"><a class="reference internal" href="vortex.html">Vortex</a></li>
<li class="toctree-l1"><a class="reference internal" href="thunder/index.html">Thunder</a></li>
<li class="toctree-l1"><a class="reference internal" href="vista.html">Vista</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNAB.html">SNAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="external_settings.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.EXTERNAL_SETTINGS</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="redis-integration.html">Redis integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="rebrow.html"><span class="red">re</span><span class="brow">brow</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="running-multiple-skylines.html">Running multiple Skyline instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="skyline-and-friends.html">Skyline and friends</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning-tips.html">Tuning tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-skyline.html">Monitoring Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="skyline_metrics.html"><span class="skyblue">Sky</span><span class="red">line</span> metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="opentelemetry.html">opentelemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Trouble shooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecated-docs/index.html">Deprecated docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="skyline.html">skyline package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Skyline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Alert testing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/alert-testing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="alert-testing">
<h1>Alert testing<a class="headerlink" href="#alert-testing" title="Permalink to this heading"></a></h1>
<p>You can test alerts before (during set up) and after you have metrics (when up
and running).</p>
<p>Testing alerts after you are up and running is easy, just go to the Utilities
tab in the webapp and then select the Test alert tab and submit your metric and
app to test an alert from.</p>
<p>If you want to test alerting before you have metrics being fed into the system
you can follow the below procedure.</p>
<p>The settings.py has a default non-existent metric namespace for testing your
alerters, in the <code class="docutils literal notranslate"><span class="pre">skyline_test.alerters.test</span></code> <a class="reference internal" href="skyline.html#settings.ALERTS" title="settings.ALERTS"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.ALERTS</span></code></a> tuple.</p>
<p>If you want to test your email, Slack or Pagerduty OPTS are correctly configured
and working, do the following.</p>
<ul class="simple">
<li><p>Ensure that all your email, slack and/or pagerduty options are all configured
correctly with your strings/tokens/etc in settings.py</p></li>
<li><p>Ensure the relevant <code class="docutils literal notranslate"><span class="pre">skyline_test.alerters.test</span></code> instances in settings.py
are configured to your desired outputs</p></li>
<li><p>Once again using the Python-3.8.13 virtualenv and documentation PATHs as an
example:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="o">=</span><span class="s2">&quot;/opt/python_virtualenv&quot;</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="s2">&quot;skyline-py3813&quot;</span>

<span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="si">}</span><span class="s2">/projects/</span><span class="si">${</span><span class="nv">PROJECT</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">source</span><span class="w"> </span>bin/activate
<span class="c1"># To test email alert</span>
bin/python3.8<span class="w"> </span>/opt/skyline/github/skyline/utils/verify_alerts.py<span class="w"> </span>--trigger<span class="w"> </span>smtp<span class="w"> </span>--metric<span class="w"> </span><span class="s1">&#39;skyline_test.alerters.test&#39;</span>
<span class="c1"># To test slack alert</span>
bin/python3.8<span class="w"> </span>/opt/skyline/github/skyline/utils/verify_alerts.py<span class="w"> </span>--trigger<span class="w"> </span>slack<span class="w"> </span>--metric<span class="w"> </span><span class="s1">&#39;skyline_test.alerters.test&#39;</span>
<span class="c1"># To test pagerduty alert</span>
bin/python3.8<span class="w"> </span>/opt/skyline/github/skyline/utils/verify_alerts.py<span class="w"> </span>--trigger<span class="w"> </span>pagerduty<span class="w"> </span>--metric<span class="w"> </span><span class="s1">&#39;skyline_test.alerters.test&#39;</span>
deactivate
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should get an alert on each alerter that you have enabled and
tested.  Do note that the graphs sent with the alerts will have <strong>no data</strong> in
them.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the pagerduty alert_testing trigger has not been tested for a long
time in the verify_alerts.py context.</p>
</div>
<p>You should get an alert on each alerter that you have enabled and tested.  Do
note that the graphs sent with the alerts will have <strong>no data</strong> in them.</p>
<p>You can expect output such as this, <strong>there will be errors</strong>, these are expected,
the alerts still get sent.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>skyline-py383<span class="o">)</span><span class="w"> </span><span class="o">[</span>skyline@skyline<span class="w"> </span>skyline-py383<span class="o">]</span><span class="w"> </span>bin/python3.8<span class="w"> </span>/opt/skyline/github/skyline/utils/verify_alerts.py<span class="w"> </span>--trigger<span class="w"> </span>smtp<span class="w"> </span>--metric<span class="w"> </span><span class="s1">&#39;skyline_test.alerters.test&#39;</span>
Verifying<span class="w"> </span>alerts<span class="w"> </span><span class="k">for</span>:<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span>
Testing<span class="w"> </span>Analyzer<span class="w"> </span>alerting<span class="w"> </span>on<span class="w"> </span>skyline_test.alerters.test
<span class="w">    </span>Testing<span class="w"> </span>Analyzer<span class="w"> </span>alerting<span class="w"> </span>-<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>via<span class="w"> </span>smtp...triggered
ERROR:analyzerLog:error<span class="w"> </span>::<span class="w"> </span>alerters<span class="w"> </span>-<span class="w"> </span>alert_smtp<span class="w"> </span>-<span class="w"> </span>getattr<span class="w"> </span>error
<span class="w">    </span>Testing<span class="w"> </span>Analyzer<span class="w"> </span>alerting<span class="w"> </span>-<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>via<span class="w"> </span>syslog<span class="w"> </span>...triggered
Testing<span class="w"> </span>Mirage<span class="w"> </span>alerting<span class="w"> </span>on<span class="w"> </span>skyline_test.alerters.test
<span class="w">    </span>Testing<span class="w"> </span>Mirage<span class="w"> </span>alerting<span class="w"> </span>-<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>via<span class="w"> </span>smtp...triggered
ERROR:mirageLog:error<span class="w"> </span>::<span class="w"> </span>alert_smtp<span class="w"> </span>-<span class="w"> </span>unpack<span class="w"> </span>timeseries<span class="w"> </span>failed
ERROR:mirageLog:error<span class="w"> </span>::<span class="w"> </span>alerters<span class="w"> </span>-<span class="w"> </span>alert_smtp<span class="w"> </span>-<span class="w"> </span>getattr<span class="w"> </span>error
<span class="w">    </span>Testing<span class="w"> </span>Mirage<span class="w"> </span>alerting<span class="w"> </span>-<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>via<span class="w"> </span>syslog<span class="w"> </span>...triggered
Testing<span class="w"> </span>Boundary<span class="w"> </span>alerting<span class="w"> </span>on<span class="w"> </span>skyline_test.alerters.test
<span class="w">    </span>Testing<span class="w"> </span>Boundary<span class="w"> </span>alerting<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span><span class="k">for</span><span class="w"> </span>smtp<span class="p">|</span>slack<span class="w"> </span>via<span class="w"> </span>smtp
<span class="o">(</span>skyline-py383<span class="o">)</span><span class="w"> </span><span class="o">[</span>skyline@skyline<span class="w"> </span>skyline-py383<span class="o">]</span><span class="w"> </span>bin/python3.8<span class="w"> </span>/opt/skyline/github/skyline/utils/verify_alerts.py<span class="w"> </span>--trigger<span class="w"> </span>slack<span class="w"> </span>--metric<span class="w"> </span><span class="s1">&#39;skyline_test.alerters.test&#39;</span>
Verifying<span class="w"> </span>alerts<span class="w"> </span><span class="k">for</span>:<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span>
Testing<span class="w"> </span>Analyzer<span class="w"> </span>alerting<span class="w"> </span>on<span class="w"> </span>skyline_test.alerters.test
<span class="w">    </span>Testing<span class="w"> </span>Analyzer<span class="w"> </span>alerting<span class="w"> </span>-<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>via<span class="w"> </span>slack...triggered
<span class="w">    </span>Testing<span class="w"> </span>Analyzer<span class="w"> </span>alerting<span class="w"> </span>-<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>via<span class="w"> </span>syslog<span class="w"> </span>...triggered
Testing<span class="w"> </span>Mirage<span class="w"> </span>alerting<span class="w"> </span>on<span class="w"> </span>skyline_test.alerters.test
<span class="w">    </span>Testing<span class="w"> </span>Mirage<span class="w"> </span>alerting<span class="w"> </span>-<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>via<span class="w"> </span>slack...triggered
<span class="w">    </span>Testing<span class="w"> </span>Mirage<span class="w"> </span>alerting<span class="w"> </span>-<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>via<span class="w"> </span>syslog<span class="w"> </span>...triggered
Testing<span class="w"> </span>Boundary<span class="w"> </span>alerting<span class="w"> </span>on<span class="w"> </span>skyline_test.alerters.test
<span class="w">    </span>Testing<span class="w"> </span>Boundary<span class="w"> </span>alerting<span class="w"> </span>against<span class="w"> </span><span class="s2">&quot;skyline_test.alerters.test&quot;</span><span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span><span class="k">for</span><span class="w"> </span>smtp<span class="p">|</span>slack<span class="w"> </span>via<span class="w"> </span>slack
<span class="o">(</span>skyline-py383<span class="o">)</span><span class="w"> </span><span class="o">[</span>skyline@skyline<span class="w"> </span>skyline-py383<span class="o">]</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="getting-data-into-skyline.html" class="btn btn-neutral float-left" title="Getting data into Skyline" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="alerts.html" class="btn btn-neutral float-right" title="Alerts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2014, Etsy Inc; 2015, Abe Stanway; 2015-2023, Gary Wilson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>