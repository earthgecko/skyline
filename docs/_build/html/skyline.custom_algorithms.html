<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>skyline.custom_algorithms package &mdash; Skyline 4.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/skyline.styles.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="skyline.flux package" href="skyline.flux.html" />
    <link rel="prev" title="skyline.crucible package" href="skyline.crucible.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Skyline
          </a>
              <div class="version">
                4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="anomify-cutting-edge-skyline.html">Anomify - cutting edge Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="running-in-python-virtualenv.html">Running Skyline in a Python virtualenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-data-into-skyline.html">Getting data into Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="alert-testing.html">Alert testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="alerts.html">Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="slack.html">slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="monotonic-metrics.html">Strictly increasing monotonicity</a></li>
<li class="toctree-l1"><a class="reference internal" href="horizon.html">Horizon</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzer.html">Analyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzer-optimizations.html">Analyzer Optimizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="mirage.html">Mirage</a></li>
<li class="toctree-l1"><a class="reference internal" href="boundary.html">Boundary</a></li>
<li class="toctree-l1"><a class="reference internal" href="crucible.html">Crucible</a></li>
<li class="toctree-l1"><a class="reference internal" href="panorama.html">Panorama</a></li>
<li class="toctree-l1"><a class="reference internal" href="webapp.html">Webapp</a></li>
<li class="toctree-l1"><a class="reference internal" href="ionosphere.html">Ionosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="ionosphere_echo.html">Ionosphere echo</a></li>
<li class="toctree-l1"><a class="reference internal" href="ionosphere_inference.html">Ionosphere inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="ionosphere_learn_repetitive_patterns.html">Ionosphere learning from repetitive patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsfresh.html">tsfresh</a></li>
<li class="toctree-l1"><a class="reference internal" href="luminosity.html">Luminosity</a></li>
<li class="toctree-l1"><a class="reference internal" href="flux.html">Flux</a></li>
<li class="toctree-l1"><a class="reference internal" href="upload-data-to-flux.html">upload_data to Flux - EXPERIMENTAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="prometheus.html">Prometheus</a></li>
<li class="toctree-l1"><a class="reference internal" href="vortex.html">Vortex</a></li>
<li class="toctree-l1"><a class="reference internal" href="thunder/index.html">Thunder</a></li>
<li class="toctree-l1"><a class="reference internal" href="vista.html">Vista</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNAB.html">SNAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="external_settings.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.EXTERNAL_SETTINGS</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="redis-integration.html">Redis integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="rebrow.html"><span class="red">re</span><span class="brow">brow</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="running-multiple-skylines.html">Running multiple Skyline instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="skyline-and-friends.html">Skyline and friends</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning-tips.html">Tuning tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-skyline.html">Monitoring Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="skyline_metrics.html"><span class="skyblue">Sky</span><span class="red">line</span> metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="opentelemetry.html">opentelemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Trouble shooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecated-docs/index.html">Deprecated docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="skyline.html">skyline package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="skyline.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="skyline.analyzer.html">skyline.analyzer package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.analyzer_dev.html">skyline.analyzer_dev package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.boundary.html">skyline.boundary package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.crucible.html">skyline.crucible package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">skyline.custom_algorithms package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.abs_stddev_from_median">skyline.custom_algorithms.abs_stddev_from_median module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.adtk_level_shift">skyline.custom_algorithms.adtk_level_shift module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.adtk_persist">skyline.custom_algorithms.adtk_persist module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.adtk_seasonal">skyline.custom_algorithms.adtk_seasonal module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.adtk_volatility_shift">skyline.custom_algorithms.adtk_volatility_shift module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.anomalous_daily_peak">skyline.custom_algorithms.anomalous_daily_peak module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.dbscan">skyline.custom_algorithms.dbscan module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.irregular_unstable">skyline.custom_algorithms.irregular_unstable module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.isolation_forest">skyline.custom_algorithms.isolation_forest module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.last_same_hours">skyline.custom_algorithms.last_same_hours module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.lof">skyline.custom_algorithms.lof module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.longest_zero_streak">skyline.custom_algorithms.longest_zero_streak module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.m66">skyline.custom_algorithms.m66 module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.macd">skyline.custom_algorithms.macd module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.median_absolute_deviation">skyline.custom_algorithms.median_absolute_deviation module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.moving_sum_and_value_decrease">skyline.custom_algorithms.moving_sum_and_value_decrease module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.moving_sum_decrease">skyline.custom_algorithms.moving_sum_decrease module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.mstl">skyline.custom_algorithms.mstl module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#skyline-custom-algorithms-numba-spectral-residual-module">skyline.custom_algorithms.numba_spectral_residual module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.one_class_svm">skyline.custom_algorithms.one_class_svm module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.pca">skyline.custom_algorithms.pca module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.sigma">skyline.custom_algorithms.sigma module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.significant_change_window_percent_sustained">skyline.custom_algorithms.significant_change_window_percent_sustained module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#skyline-custom-algorithms-skyline-fbprophet-module">skyline.custom_algorithms.skyline_fbprophet module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.skyline_matrixprofile">skyline.custom_algorithms.skyline_matrixprofile module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#skyline-custom-algorithms-skyline-ppscore-module">skyline.custom_algorithms.skyline_ppscore module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.skyline_prophet">skyline.custom_algorithms.skyline_prophet module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.spectral_entropy">skyline.custom_algorithms.spectral_entropy module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms.spectral_residual">skyline.custom_algorithms.spectral_residual module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-custom_algorithms">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skyline.flux.html">skyline.flux package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.horizon.html">skyline.horizon package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.ionosphere.html">skyline.ionosphere package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.luminosity.html">skyline.luminosity package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.mirage.html">skyline.mirage package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.panorama.html">skyline.panorama package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.snab.html">skyline.snab package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.thunder.html">skyline.thunder package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.tsfresh_features.html">skyline.tsfresh_features package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.vista.html">skyline.vista package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyline.webapp.html">skyline.webapp package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-algorithm_exceptions">skyline.algorithm_exceptions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-algorithm_scores_plot">skyline.algorithm_scores_plot module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-create_matplotlib_graph">skyline.create_matplotlib_graph module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-custom_algorithms_to_run">skyline.custom_algorithms_to_run module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-database">skyline.database module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-external_alert_configs">skyline.external_alert_configs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-features_profile">skyline.features_profile module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-fp_match_plots">skyline.fp_match_plots module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-ionosphere_functions">skyline.ionosphere_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-matched_or_regexed_in_list">skyline.matched_or_regexed_in_list module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-motif_match_types">skyline.motif_match_types module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-motif_plots">skyline.motif_plots module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-plot_motif_window">skyline.plot_motif_window module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-settings">skyline.settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-skyline_functions">skyline.skyline_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-skyline_version">skyline.skyline_version module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-slack_functions">skyline.slack_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-tsfresh_feature_names">skyline.tsfresh_feature_names module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-validate_settings">skyline.validate_settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-validate_settings_test">skyline.validate_settings_test module</a></li>
<li class="toctree-l2"><a class="reference internal" href="skyline.html#module-skyline">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Skyline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="skyline.html">skyline package</a></li>
      <li class="breadcrumb-item active">skyline.custom_algorithms package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/skyline.custom_algorithms.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="skyline-custom-algorithms-package">
<h1>skyline.custom_algorithms package<a class="headerlink" href="#skyline-custom-algorithms-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-custom_algorithms.abs_stddev_from_median">
<span id="skyline-custom-algorithms-abs-stddev-from-median-module"></span><h2>skyline.custom_algorithms.abs_stddev_from_median module<a class="headerlink" href="#module-custom_algorithms.abs_stddev_from_median" title="Permalink to this heading"></a></h2>
<p>THIS IS A SAMPLE CUSTOM ALGORITHM to provide a skeleton to develop your own
custom algorithms.  The algorithm itself, although viable, is not recommended for
production or general use, it is simply a toy algorithm here to demonstrate the
structure of a simple custom algorithm that has <code class="docutils literal notranslate"><span class="pre">algorithm_parameters</span></code> passed
as an empty dict {}.
It is documented via comments #</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.abs_stddev_from_median.abs_stddev_from_median">
<span class="sig-name descname"><span class="pre">abs_stddev_from_median</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/abs_stddev_from_median.html#abs_stddev_from_median"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.abs_stddev_from_median.abs_stddev_from_median" title="Permalink to this definition"></a></dt>
<dd><p>A data point is anomalous if its absolute value is greater than three
standard deviations of the median.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any parameters and their
arguments you wish to pass to the algorithm.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.adtk_level_shift">
<span id="skyline-custom-algorithms-adtk-level-shift-module"></span><h2>skyline.custom_algorithms.adtk_level_shift module<a class="headerlink" href="#module-custom_algorithms.adtk_level_shift" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.adtk_level_shift.adtk_level_shift">
<span class="sig-name descname"><span class="pre">adtk_level_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/adtk_level_shift.html#adtk_level_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.adtk_level_shift.adtk_level_shift" title="Permalink to this definition"></a></dt>
<dd><p>A timeseries is anomalous if a level shift occurs in a 5 window period bound
by a factor of 9 of the normal range based on historical interquartile range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the matrixprofile custom
algorithm the following parameters are required, example:
<a href="#id1"><span class="problematic" id="id2">``</span></a>algorithm_parameters={</p>
<blockquote>
<div><p>’c’: 9.0,
‘run_every’: 5,
‘side’: ‘both’,
‘window’: 5</p>
</div></blockquote>
<p>}``</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
<p>Performance is of paramount importance in Skyline, especially in terms of
computational complexity, along with execution time and CPU usage. The
adtk LevelShiftAD algortihm is not O(n) and it is not fast either, not when
compared to the normal three-sigma triggered algorithms.  However it is
useful if you care about detecting all level shifts.  The normal three-sigma
triggered algorithms do not always detect a level shift, especially if the
level shift does not breach the three-sigma limits.  Therefore you may find
over time that you encounter alerts that contain level shifts that you
thought should have been detected.  On these types of metrics and events,
the adtk LevelShiftAD algortihm can be implemented to detect and alert on
these.  It is not recommended to run on all your metrics as it would
immediately triple the analyzer runtime every if only run every 5 windows/
minutes.</p>
<p>Due to the computational complexity and long run time of the adtk
LevelShiftAD algorithm on the size of timeseries data used by Skyline, if
you consider the following timings of all three-sigma triggered algorithms
and compare them to the to the adtk_level_shift results in the last 2 rows
of the below log, it is clear that the running adtk_level_shift on all
metrics is probably not desirable, even if it is possible to do, it is very
noisy.</p>
<p>2021-03-06 10:46:38 :: 1582754 :: algorithm run count - histogram_bins run 567 times
2021-03-06 10:46:38 :: 1582754 :: algorithm timings count - histogram_bins has 567 timings
2021-03-06 10:46:38 :: 1582754 :: algorithm timing - histogram_bins - total: 1.051136 - median: 0.001430
2021-03-06 10:46:38 :: 1582754 :: algorithm run count - first_hour_average run 567 times
2021-03-06 10:46:38 :: 1582754 :: algorithm timings count - first_hour_average has 567 timings
2021-03-06 10:46:38 :: 1582754 :: algorithm timing - first_hour_average - total: 1.322432 - median: 0.001835
2021-03-06 10:46:38 :: 1582754 :: algorithm run count - stddev_from_average run 567 times
2021-03-06 10:46:38 :: 1582754 :: algorithm timings count - stddev_from_average has 567 timings
2021-03-06 10:46:38 :: 1582754 :: algorithm timing - stddev_from_average - total: 1.097290 - median: 0.001641
2021-03-06 10:46:38 :: 1582754 :: algorithm run count - grubbs run 567 times
2021-03-06 10:46:38 :: 1582754 :: algorithm timings count - grubbs has 567 timings
2021-03-06 10:46:38 :: 1582754 :: algorithm timing - grubbs - total: 1.742929 - median: 0.002438
2021-03-06 10:46:38 :: 1582754 :: algorithm run count - ks_test run 147 times
2021-03-06 10:46:38 :: 1582754 :: algorithm timings count - ks_test has 147 timings
2021-03-06 10:46:38 :: 1582754 :: algorithm timing - ks_test - total: 0.127648 - median: 0.000529
2021-03-06 10:46:38 :: 1582754 :: algorithm run count - mean_subtraction_cumulation run 40 times
2021-03-06 10:46:38 :: 1582754 :: algorithm timings count - mean_subtraction_cumulation has 40 timings
2021-03-06 10:46:38 :: 1582754 :: algorithm timing - mean_subtraction_cumulation - total: 0.152515 - median: 0.003152
2021-03-06 10:46:39 :: 1582754 :: algorithm run count - median_absolute_deviation run 35 times
2021-03-06 10:46:39 :: 1582754 :: algorithm timings count - median_absolute_deviation has 35 timings
2021-03-06 10:46:39 :: 1582754 :: algorithm timing - median_absolute_deviation - total: 0.143770 - median: 0.003248
2021-03-06 10:46:39 :: 1582754 :: algorithm run count - stddev_from_moving_average run 30 times
2021-03-06 10:46:39 :: 1582754 :: algorithm timings count - stddev_from_moving_average has 30 timings
2021-03-06 10:46:39 :: 1582754 :: algorithm timing - stddev_from_moving_average - total: 0.125173 - median: 0.003092
2021-03-06 10:46:39 :: 1582754 :: algorithm run count - least_squares run 16 times
2021-03-06 10:46:39 :: 1582754 :: algorithm timings count - least_squares has 16 timings
2021-03-06 10:46:39 :: 1582754 :: algorithm timing - least_squares - total: 0.089108 - median: 0.005538
2021-03-06 10:46:39 :: 1582754 :: algorithm run count - abs_stddev_from_median run 1 times
2021-03-06 10:46:39 :: 1582754 :: algorithm timings count - abs_stddev_from_median has 1 timings
2021-03-06 10:46:39 :: 1582754 :: algorithm timing - abs_stddev_from_median - total: 0.036797 - median: 0.036797
2021-03-06 10:46:39 :: 1582754 :: algorithm run count - adtk_level_shift run 271 times
2021-03-06 10:46:39 :: 1582754 :: algorithm timings count - adtk_level_shift has 271 timings
2021-03-06 10:46:39 :: 1582754 :: algorithm timing - adtk_level_shift - total: 13.729565 - median: 0.035791
…
…
2021-03-06 10:46:39 :: 1582754 :: seconds to run     :: 27.93  # THE TOTAL ANALYZER RUNTIME</p>
<p>Therefore the analysis methodology implemented for the adtk_level_shift
custom_algorithm is as folows:</p>
<ul class="simple">
<li><p>When new metrics are added either to the configuration or by actual new</p></li>
</ul>
<p>metrics coming online that match the <code class="docutils literal notranslate"><span class="pre">algorithm_parameters['namespace']</span></code>,
Skyline implements sharding on new metrics into time slots to prevent a
thundering herd situation from developing.  A newly added metrics will
eventually be assigned into a time shard and be added and the last analysed
timestamp will be added to the <code class="docutils literal notranslate"><span class="pre">analyzer.last.adtk_level_shift</span></code> Redis hash
key to determine the next scheduled run with
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters['namespace']</span></code></p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">run_every</span></code> parameter is implemented so that the algorithm can be</p></li>
</ul>
<p>configured to run on a metric once every <code class="docutils literal notranslate"><span class="pre">run_every</span></code> minutes.  The default
is to run it every 5 minutes using window 5 (rolling) and trigger as
anomalous if the algorithm labels any of the last 5 datapoints as anomalous.
This means that there could be up to a 5 minute delay on an alert on the
60 second, 168 SECOND_ORDER_RESOLUTION_HOURS metrics in the example, but a
<code class="docutils literal notranslate"><span class="pre">c=9.0</span></code> level shift would be detected and would be alerted on (if both
analyzer and mirage triggered on it).  This periodic running of the
algorithm is a tradeoff so that the adtk_level_shift load and runtime can be
spread over <code class="docutils literal notranslate"><span class="pre">run_every</span></code> minutes.</p>
<ul class="simple">
<li><p>The algorithm is not run against metrics that are sparsely populated.</p></li>
</ul>
<p>When the algorithm is run on sparsely populated metrics it results in lots
of false positives and noise.</p>
<p>The Skyline CUSTOM_ALGORITHMS implementation of the adtk LevelShiftAD
algorithm is configured as the example shown below.  However please note
that the algorithm_parameters shown in this example configuration are
suitiable for metrics that have a 60 second relation and have a
<a class="reference internal" href="skyline.html#settings.ALERTS" title="settings.ALERTS"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.ALERTS</span></code></a> Mirage SECOND_ORDER_RESOLUTION_HOURS of 168 (7 days).
For metrics with a different resolution/frequency may require different
values appropriate for metric resolution.</p>
<p>Example CUSTOM_ALGORITHMS configuration:</p>
<dl>
<dt>‘adtk_level_shift’: {</dt><dd><dl class="simple">
<dt>‘namespaces’: [</dt><dd><p>‘skyline.analyzer.run_time’, ‘skyline.analyzer.total_metrics’,
‘skyline.analyzer.exceptions’</p>
</dd>
</dl>
<p>],
‘algorithm_source’: ‘/opt/skyline/github/skyline/skyline/custom_algorithms/adtk_level_shift.py’,
‘algorithm_parameters’: {‘c’: 9.0, ‘run_every’: 5, ‘side’: ‘both’, ‘window’: 5},
‘max_execution_time’: 0.5,
‘consensus’: 1,
‘algorithms_allowed_in_consensus’: [‘adtk_level_shift’],
‘run_3sigma_algorithms’: True,
‘run_before_3sigma’: True,
‘run_only_if_consensus’: False,
‘use_with’: [“analyzer”, “mirage”],
‘debug_logging’: False,</p>
</dd>
</dl>
<p>},</p>
</dd></dl>

</section>
<section id="module-custom_algorithms.adtk_persist">
<span id="skyline-custom-algorithms-adtk-persist-module"></span><h2>skyline.custom_algorithms.adtk_persist module<a class="headerlink" href="#module-custom_algorithms.adtk_persist" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.adtk_persist.adtk_persist">
<span class="sig-name descname"><span class="pre">adtk_persist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/adtk_persist.html#adtk_persist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.adtk_persist.adtk_persist" title="Permalink to this definition"></a></dt>
<dd><p>A timeseries is anomalous if a level shift occurs in a 5 window period bound
by a factor of 9 of the normal range based on historical interquartile range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the matrixprofile custom
algorithm the following parameters are required, example:
<a href="#id3"><span class="problematic" id="id4">``</span></a>algorithm_parameters={</p>
<blockquote>
<div><p>’c’: 9.0,
‘run_every’: 5,
‘side’: ‘both’,
‘window’: 5</p>
</div></blockquote>
<p>}``</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
<p>Performance is of paramount importance in Skyline, especially in terms of
computational complexity, along with execution time and CPU usage. The
adtk persistAD algortihm is not O(n) and it is not fast either, not when
compared to the normal three-sigma triggered algorithms.  However it is
useful if you care about detecting all level shifts.  The normal three-sigma
triggered algorithms do not always detect a level shift, especially if the
level shift does not breach the three-sigma limits.  Therefore you may find
over time that you encounter alerts that contain level shifts that you
thought should have been detected.  On these types of metrics and events,
the adtk PersistAD algortihm can be implemented to detect and alert on
these.  It is not recommended to run on all your metrics as it would
immediately triple the analyzer runtime every if only run every 5 windows/
minutes.</p>
<p>Due to the computational complexity and long run time of the adtk
PersistAD algorithm on the size of timeseries data used by Skyline.
Therefore the analysis methodology implemented for the adtk_persist
custom_algorithm is as folows:</p>
<ul class="simple">
<li><p>When new metrics are added either to the configuration or by actual new</p></li>
</ul>
<p>metrics coming online that match the <code class="docutils literal notranslate"><span class="pre">algorithm_parameters['namespace']</span></code>,
Skyline implements sharding on new metrics into time slots to prevent a
thundering herd situation from developing.  A newly added metrics will
eventually be assigned into a time shard and be added and the last analysed
timestamp will be added to the <code class="docutils literal notranslate"><span class="pre">analyzer.last.adtk_persist</span></code> Redis hash
key to determine the next scheduled run with
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters['namespace']</span></code></p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">run_every</span></code> parameter is implemented so that the algorithm can be</p></li>
</ul>
<p>configured to run on a metric once every <code class="docutils literal notranslate"><span class="pre">run_every</span></code> minutes.  The default
is to run it every 5 minutes using window 5 (rolling) and trigger as
anomalous if the algorithm labels any of the last 5 datapoints as anomalous.
This means that there could be up to a 5 minute delay on an alert on the
60 second, 168 SECOND_ORDER_RESOLUTION_HOURS metrics in the example, but a
<code class="docutils literal notranslate"><span class="pre">c=9.0</span></code> level shift would be detected and would be alerted on (if both
analyzer and mirage triggered on it).  This periodic running of the
algorithm is a tradeoff so that the adtk_persist load and runtime can be
spread over <code class="docutils literal notranslate"><span class="pre">run_every</span></code> minutes.</p>
<ul class="simple">
<li><p>The algorithm is not run against metrics that are sparsely populated.</p></li>
</ul>
<p>When the algorithm is run on sparsely populated metrics it results in lots
of false positives and noise.</p>
<p>The Skyline CUSTOM_ALGORITHMS implementation of the adtk PersistAD
algorithm is configured as the example shown below.  However please note
that the algorithm_parameters shown in this example configuration are
suitiable for metrics that have a 60 second relation and have a
<a class="reference internal" href="skyline.html#settings.ALERTS" title="settings.ALERTS"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.ALERTS</span></code></a> Mirage SECOND_ORDER_RESOLUTION_HOURS of 168 (7 days).
For metrics with a different resolution/frequency may require different
values appropriate for metric resolution.</p>
<p>:
Example CUSTOM_ALGORITHMS configuration:</p>
<dl>
<dt>‘adtk_persist’: {</dt><dd><dl class="simple">
<dt>‘namespaces’: [</dt><dd><p>‘skyline.analyzer.run_time’, ‘skyline.analyzer.total_metrics’,
‘skyline.analyzer.exceptions’</p>
</dd>
</dl>
<p>],
‘algorithm_source’: ‘/opt/skyline/github/skyline/skyline/custom_algorithms/adtk_persist.py’,
‘algorithm_parameters’: {‘c’: 9.0, ‘run_every’: 5, ‘side’: ‘both’, ‘window’: 5},
‘max_execution_time’: 0.5,
‘consensus’: 1,
‘algorithms_allowed_in_consensus’: [‘adtk_persist’],
‘run_3sigma_algorithms’: True,
‘run_before_3sigma’: True,
‘run_only_if_consensus’: False,
‘use_with’: [“analyzer”, “mirage”],
‘debug_logging’: False,</p>
</dd>
</dl>
<p>},</p>
</dd></dl>

</section>
<section id="module-custom_algorithms.adtk_seasonal">
<span id="skyline-custom-algorithms-adtk-seasonal-module"></span><h2>skyline.custom_algorithms.adtk_seasonal module<a class="headerlink" href="#module-custom_algorithms.adtk_seasonal" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.adtk_seasonal.adtk_seasonal">
<span class="sig-name descname"><span class="pre">adtk_seasonal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/adtk_seasonal.html#adtk_seasonal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.adtk_seasonal.adtk_seasonal" title="Permalink to this definition"></a></dt>
<dd><p>A timeseries is anomalous if a level shift occurs in a 5 window period bound
by a factor of 9 of the normal range based on historical interquartile range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the matrixprofile custom
algorithm the following parameters are required, example:
<a href="#id5"><span class="problematic" id="id6">``</span></a>algorithm_parameters={</p>
<blockquote>
<div><p>’c’: 9.0,
‘run_every’: 5,
‘side’: ‘both’,</p>
</div></blockquote>
<p>}``</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
<p>Performance is of paramount importance in Skyline, especially in terms of
computational complexity, along with execution time and CPU usage. The
adtk SeasonalAD algortihm is not O(n) and it is not fast either, not when
compared to the normal three-sigma triggered algorithms.  However it is
useful if you care about detecting all level shifts.  The normal three-sigma
triggered algorithms do not always detect a level shift, especially if the
level shift does not breach the three-sigma limits.  Therefore you may find
over time that you encounter alerts that contain level shifts that you
thought should have been detected.  On these types of metrics and events,
the adtk SeasonalAD algortihm can be implemented to detect and alert on
these.  It is not recommended to run on all your metrics as it would
immediately triple the analyzer runtime every if only run every 5 windows/
minutes.</p>
<p>Due to the computational complexity and long run time of the adtk
SeasonalAD algorithm on the size of timeseries data used by Skyline.
Therefore the analysis methodology implemented for the adtk_seasonal
custom_algorithm is as folows:</p>
<ul class="simple">
<li><p>When new metrics are added either to the configuration or by actual new</p></li>
</ul>
<p>metrics coming online that match the <code class="docutils literal notranslate"><span class="pre">algorithm_parameters['namespace']</span></code>,
Skyline implements sharding on new metrics into time slots to prevent a
thundering herd situation from developing.  A newly added metrics will
eventually be assigned into a time shard and be added and the last analysed
timestamp will be added to the <code class="docutils literal notranslate"><span class="pre">analyzer.last.adtk_seasonal</span></code> Redis hash
key to determine the next scheduled run with
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters['namespace']</span></code></p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">run_every</span></code> parameter is implemented so that the algorithm can be</p></li>
</ul>
<p>configured to run on a metric once every <code class="docutils literal notranslate"><span class="pre">run_every</span></code> minutes.  The default
is to run it every 5 minutes using window 5 (rolling) and trigger as
anomalous if the algorithm labels any of the last 5 datapoints as anomalous.
This means that there could be up to a 5 minute delay on an alert on the
60 second, 168 SECOND_ORDER_RESOLUTION_HOURS metrics in the example, but a
<code class="docutils literal notranslate"><span class="pre">c=9.0</span></code> level shift would be detected and would be alerted on (if both
analyzer and mirage triggered on it).  This periodic running of the
algorithm is a tradeoff so that the adtk_seasonal load and runtime can be
spread over <code class="docutils literal notranslate"><span class="pre">run_every</span></code> minutes.</p>
<ul class="simple">
<li><p>The algorithm is not run against metrics that are sparsely populated.</p></li>
</ul>
<p>When the algorithm is run on sparsely populated metrics it results in lots
of false positives and noise.</p>
<p>The Skyline CUSTOM_ALGORITHMS implementation of the adtk SeasonalAD
algorithm is configured as the example shown below.  However please note
that the algorithm_parameters shown in this example configuration are
suitiable for metrics that have a 60 second relation and have a
<a class="reference internal" href="skyline.html#settings.ALERTS" title="settings.ALERTS"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.ALERTS</span></code></a> Mirage SECOND_ORDER_RESOLUTION_HOURS of 168 (7 days).
For metrics with a different resolution/frequency may require different
values appropriate for metric resolution.</p>
<p>:
Example CUSTOM_ALGORITHMS configuration:</p>
<dl>
<dt>‘adtk_seasonal’: {</dt><dd><dl class="simple">
<dt>‘namespaces’: [</dt><dd><p>‘skyline.analyzer.run_time’, ‘skyline.analyzer.total_metrics’,
‘skyline.analyzer.exceptions’</p>
</dd>
</dl>
<p>],
‘algorithm_source’: ‘/opt/skyline/github/skyline/skyline/custom_algorithms/adtk_seasonal.py’,
‘algorithm_parameters’: {‘c’: 9.0, ‘run_every’: 5, ‘side’: ‘both’},
‘max_execution_time’: 0.5,
‘consensus’: 1,
‘algorithms_allowed_in_consensus’: [‘adtk_seasonal’],
‘run_3sigma_algorithms’: True,
‘run_before_3sigma’: True,
‘run_only_if_consensus’: False,
‘use_with’: [“analyzer”, “mirage”],
‘debug_logging’: False,</p>
</dd>
</dl>
<p>},</p>
</dd></dl>

</section>
<section id="module-custom_algorithms.adtk_volatility_shift">
<span id="skyline-custom-algorithms-adtk-volatility-shift-module"></span><h2>skyline.custom_algorithms.adtk_volatility_shift module<a class="headerlink" href="#module-custom_algorithms.adtk_volatility_shift" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.adtk_volatility_shift.adtk_volatility_shift">
<span class="sig-name descname"><span class="pre">adtk_volatility_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/adtk_volatility_shift.html#adtk_volatility_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.adtk_volatility_shift.adtk_volatility_shift" title="Permalink to this definition"></a></dt>
<dd><p>A timeseries is anomalous if a level shift occurs in a 5 window period bound
by a factor of 9 of the normal range based on historical interquartile range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the matrixprofile custom
algorithm the following parameters are required, example:
<a href="#id7"><span class="problematic" id="id8">``</span></a>algorithm_parameters={</p>
<blockquote>
<div><p>’c’: 9.0,
‘run_every’: 5,
‘side’: ‘both’,
‘window’: 5</p>
</div></blockquote>
<p>}``</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
<p>Performance is of paramount importance in Skyline, especially in terms of
computational complexity, along with execution time and CPU usage. The
adtk VolatilityShiftAD algortihm is not O(n) and it is not fast either, not when
compared to the normal three-sigma triggered algorithms.  However it is
useful if you care about detecting all level shifts.  The normal three-sigma
triggered algorithms do not always detect a level shift, especially if the
level shift does not breach the three-sigma limits.  Therefore you may find
over time that you encounter alerts that contain level shifts that you
thought should have been detected.  On these types of metrics and events,
the adtk VolatilityShiftAD algortihm can be implemented to detect and alert on
these.  It is not recommended to run on all your metrics as it would
immediately triple the analyzer runtime every if only run every 5 windows/
minutes.</p>
<p>Due to the computational complexity and long run time of the adtk
VolatilityShiftAD algorithm on the size of timeseries data used by Skyline.
Therefore the analysis methodology implemented for the adtk_volatility_shift
custom_algorithm is as folows:</p>
<ul class="simple">
<li><p>When new metrics are added either to the configuration or by actual new</p></li>
</ul>
<p>metrics coming online that match the <code class="docutils literal notranslate"><span class="pre">algorithm_parameters['namespace']</span></code>,
Skyline implements sharding on new metrics into time slots to prevent a
thundering herd situation from developing.  A newly added metrics will
eventually be assigned into a time shard and be added and the last analysed
timestamp will be added to the <code class="docutils literal notranslate"><span class="pre">analyzer.last.adtk_volatility_shift</span></code> Redis hash
key to determine the next scheduled run with
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters['namespace']</span></code></p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">run_every</span></code> parameter is implemented so that the algorithm can be</p></li>
</ul>
<p>configured to run on a metric once every <code class="docutils literal notranslate"><span class="pre">run_every</span></code> minutes.  The default
is to run it every 5 minutes using window 5 (rolling) and trigger as
anomalous if the algorithm labels any of the last 5 datapoints as anomalous.
This means that there could be up to a 5 minute delay on an alert on the
60 second, 168 SECOND_ORDER_RESOLUTION_HOURS metrics in the example, but a
<code class="docutils literal notranslate"><span class="pre">c=9.0</span></code> level shift would be detected and would be alerted on (if both
analyzer and mirage triggered on it).  This periodic running of the
algorithm is a tradeoff so that the adtk_volatility_shift load and runtime can be
spread over <code class="docutils literal notranslate"><span class="pre">run_every</span></code> minutes.</p>
<ul class="simple">
<li><p>The algorithm is not run against metrics that are sparsely populated.</p></li>
</ul>
<p>When the algorithm is run on sparsely populated metrics it results in lots
of false positives and noise.</p>
<p>The Skyline CUSTOM_ALGORITHMS implementation of the adtk VolatilityShiftAD
algorithm is configured as the example shown below.  However please note
that the algorithm_parameters shown in this example configuration are
suitiable for metrics that have a 60 second relation and have a
<a class="reference internal" href="skyline.html#settings.ALERTS" title="settings.ALERTS"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.ALERTS</span></code></a> Mirage SECOND_ORDER_RESOLUTION_HOURS of 168 (7 days).
For metrics with a different resolution/frequency may require different
values appropriate for metric resolution.</p>
<p>:
Example CUSTOM_ALGORITHMS configuration:</p>
<dl>
<dt>‘adtk_volatility_shift’: {</dt><dd><dl class="simple">
<dt>‘namespaces’: [</dt><dd><p>‘skyline.analyzer.run_time’, ‘skyline.analyzer.total_metrics’,
‘skyline.analyzer.exceptions’</p>
</dd>
</dl>
<p>],
‘algorithm_source’: ‘/opt/skyline/github/skyline/skyline/custom_algorithms/adtk_volatility_shift.py’,
‘algorithm_parameters’: {‘c’: 9.0, ‘run_every’: 5, ‘side’: ‘both’, ‘window’: 5},
‘max_execution_time’: 0.5,
‘consensus’: 1,
‘algorithms_allowed_in_consensus’: [‘adtk_volatility_shift’],
‘run_3sigma_algorithms’: True,
‘run_before_3sigma’: True,
‘run_only_if_consensus’: False,
‘use_with’: [“analyzer”, “mirage”],
‘debug_logging’: False,</p>
</dd>
</dl>
<p>},</p>
</dd></dl>

</section>
<section id="module-custom_algorithms.anomalous_daily_peak">
<span id="skyline-custom-algorithms-anomalous-daily-peak-module"></span><h2>skyline.custom_algorithms.anomalous_daily_peak module<a class="headerlink" href="#module-custom_algorithms.anomalous_daily_peak" title="Permalink to this heading"></a></h2>
<p>anomalous_daily_peak.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.anomalous_daily_peak.anomalous_daily_peak">
<span class="sig-name descname"><span class="pre">anomalous_daily_peak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/anomalous_daily_peak.html#anomalous_daily_peak"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.anomalous_daily_peak.anomalous_daily_peak" title="Permalink to this definition"></a></dt>
<dd><p>A 7 day timeseries is NOT anomalous if the last datapoints are in a peak whose
values are within 3 standard deviations of the mean of x number of similar
peaks (+/- 20%) that occurred in windows that are 24 hours apart.</p>
<p>Only timeseries that are thought to be anomalous should be run through this
algorithm.  It is meant to be run in Mirage after all algorithms, including
custom algorithms have been run and found a metric to be ANOMALOUS.  This
algorithm does a final check to see in the anomaly is repetetive daily
pattern which occurs more than x times a week.</p>
<p>Be aware that this algorithm will identify ANY datapoint that is NOT in a
repetitive peak and within 3-sigma (+/- 20%) of the other peaks as ANOMALOUS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the anomalous_daily_peak
custom algorithm no specific algorithm_parameters are required apart
from an empty dict, example: <code class="docutils literal notranslate"><span class="pre">algorithm_parameters={}</span></code>.  But the
number_of_daily_peaks can be passed define how many peaks must exist in
the window period to be classed as normal.  If this is set to 3 and say
that we are checking a possible anomaly at 00:05, there need to be 3
peaks that occur over the past 7 days in the dialy 23:35 to 00:05 window
if there are not at least 3 then this is considered as anomalous.
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters={'number_of_daily_peaks':</span> <span class="pre">3}</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.dbscan">
<span id="skyline-custom-algorithms-dbscan-module"></span><h2>skyline.custom_algorithms.dbscan module<a class="headerlink" href="#module-custom_algorithms.dbscan" title="Permalink to this heading"></a></h2>
<p>dbscan.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.dbscan.dbscan">
<span class="sig-name descname"><span class="pre">dbscan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/dbscan.html#dbscan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.dbscan.dbscan" title="Permalink to this definition"></a></dt>
<dd><p>Outlier detector based on DBSCAN.  EXPERIMENTAL</p>
<p>UNRELIABLE as it is very sensitive to input parameters which make it difficult
to automatically determine suitable parameters.  Automatically determined
parameters can sometimes be very effective, but often they do not have the
desired results.  Seeing as there is a single epsilon value for all clusters
the algorithm fails when varying density clusters are present in the data.</p>
<p>Therefore if DBSCAN identifies more that 33% of the data points in a
timeseries as outliers, this algorithm will return an inconclusive results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  Example:
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters={'window_shape'=3,</span> <span class="pre">'min_samples'=4,</span> <span class="pre">'anomaly_window'=5,</span> <span class="pre">'return_results'=True}</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore, instance_scores</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float, instance_scores)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.irregular_unstable">
<span id="skyline-custom-algorithms-irregular-unstable-module"></span><h2>skyline.custom_algorithms.irregular_unstable module<a class="headerlink" href="#module-custom_algorithms.irregular_unstable" title="Permalink to this heading"></a></h2>
<p>irregular_unstable.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.irregular_unstable.irregular_unstable">
<span class="sig-name descname"><span class="pre">irregular_unstable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/irregular_unstable.html#irregular_unstable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.irregular_unstable.irregular_unstable" title="Permalink to this definition"></a></dt>
<dd><p>A timeseries is NOT anomalous if it has low variance over 30 days and does
not trigger multiple algorithms.</p>
<p>Only timeseries that are thought to be anomalous AND have a low variance at
7 days should be run through this algorithm.  It is meant to be run with
Mirage after all algorithms, inlcuding custom algorithms have been run and
found a metric to be ANOMALOUS.  This algorithm does a final check to see if
the metric has low variance and if so analyses the data at 30 days.</p>
<p>On irregular, unstable metrics that exhibit low variance at 7 days and 30
days, the algorithm generally results in ~63% of anomalies on these
timeseries at 7 days, being correctly identified as false positives when the
data is analysed at 30 days.</p>
<p>The irregular_unstable algorithm takes on average 3.861 seconds to run,
however if the timeseries is discarded because at 30 days it does not have
low variance, the average discard time is 0.213 seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the irregular_unstable
custom algorithm no specific algorithm_parameters are required apart
from an empty dict, example: <code class="docutils literal notranslate"><span class="pre">algorithm_parameters={}</span></code>.  But the
number_of_daily_peaks can be passed define how many peaks must exist in
the window period to be classed as normal.  If this is set to 3 and say
that we are checking a possible anomaly at 00:05, there need to be 3
peaks that occur over the past 7 days in the dialy 23:35 to 00:05 window
if there are not at least 3 then this is considered as anomalous.
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters={'number_of_daily_peaks':</span> <span class="pre">3}</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.isolation_forest">
<span id="skyline-custom-algorithms-isolation-forest-module"></span><h2>skyline.custom_algorithms.isolation_forest module<a class="headerlink" href="#module-custom_algorithms.isolation_forest" title="Permalink to this heading"></a></h2>
<p>isolation_forest.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.isolation_forest.isolation_forest">
<span class="sig-name descname"><span class="pre">isolation_forest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/isolation_forest.html#isolation_forest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.isolation_forest.isolation_forest" title="Permalink to this definition"></a></dt>
<dd><p>Outlier detector based on Isolation Forest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  Example:
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters={'contamination'='0.01',</span> <span class="pre">'anomaly_window'=5,</span> <span class="pre">'return_results'=True}</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore, isolation_forest_scores</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float, isolation_forest_scores)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.last_same_hours">
<span id="skyline-custom-algorithms-last-same-hours-module"></span><h2>skyline.custom_algorithms.last_same_hours module<a class="headerlink" href="#module-custom_algorithms.last_same_hours" title="Permalink to this heading"></a></h2>
<p>THIS IS A MORE FEATUREFUL CUSTOM ALGORITHM to provide a skeleton to develop your
own custom algorithms.  The algorithm itself, although viable, is not
recommended for production or general use, it is simply a toy algorithm here to
demonstrate the structure of a more complex custom algorithm that has
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters</span></code> passed and can also log if enabled.
It is documented via comments #</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.last_same_hours.last_same_hours">
<span class="sig-name descname"><span class="pre">last_same_hours</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/last_same_hours.html#last_same_hours"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.last_same_hours.last_same_hours" title="Permalink to this definition"></a></dt>
<dd><p>The last_same_hours algorithm determines the data points for the same hour
and minute as the current timestamp from the last x days and calculates the
mean of those values and determines whether the current data point is within
3 standard deviations of the mean.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any parameters and their
arguments you wish to pass to the algorithm.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.lof">
<span id="skyline-custom-algorithms-lof-module"></span><h2>skyline.custom_algorithms.lof module<a class="headerlink" href="#module-custom_algorithms.lof" title="Permalink to this heading"></a></h2>
<p>lof.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.lof.lof">
<span class="sig-name descname"><span class="pre">lof</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/lof.html#lof"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.lof.lof" title="Permalink to this definition"></a></dt>
<dd><p>Outlier detector for time-series data using the spectral residual algorithm.
Based on the alibi-detect implementation of “Time-Series Anomaly Detection
Service at Microsoft” (Ren et al., 2019) <a class="reference external" href="https://arxiv.org/abs/1906.03821">https://arxiv.org/abs/1906.03821</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  Example:
“algorithm_parameters”: {</p>
<blockquote>
<div><p>”n_neighbors”: 2,
“anomaly_window”: 5,
“return_results”: True,</p>
</div></blockquote>
<p>}</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore, results</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float, dict)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.longest_zero_streak">
<span id="skyline-custom-algorithms-longest-zero-streak-module"></span><h2>skyline.custom_algorithms.longest_zero_streak module<a class="headerlink" href="#module-custom_algorithms.longest_zero_streak" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.longest_zero_streak.longest_zero_streak">
<span class="sig-name descname"><span class="pre">longest_zero_streak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/longest_zero_streak.html#longest_zero_streak"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.longest_zero_streak.longest_zero_streak" title="Permalink to this definition"></a></dt>
<dd><p>A time series is anomalous if the moving sum datapoint of the window is 0 or
percent_different is greater than the defined max_zero_streak and the
datapoint is less than the moving average of the window.  This algorithm is
useful for detecting persistent decreases and drop offs in low resolution
timeseries (one datapoint per day) which do not have constant variability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself for example:
<a href="#id9"><span class="problematic" id="id10">``</span></a>algorithm_parameters={</p>
<blockquote>
<div><p>’window’: 7,
‘percent_different’: 70,
‘realtime_analysis’: True</p>
</div></blockquote>
<p>}``</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
<p>Example CUSTOM_ALGORITHMS configuration:</p>
<dl>
<dt>‘longest_zero_streak’: {</dt><dd><p>‘namespaces’: [‘app1.daily.ad_requests’],
‘algorithm_source’: ‘/opt/skyline/github/skyline/skyline/custom_algorithms/longest_zero_streak.py’,
‘algorithm_parameters’: {</p>
<blockquote>
<div><p>‘window’: 90,
‘min_zero_streak’: 8,
‘max_zero_streak’: 10,</p>
</div></blockquote>
<p>},
‘max_execution_time’: 1.0
‘consensus’: 1,
‘algorithms_allowed_in_consensus’: [‘longest_zero_streak’],
‘run_3sigma_algorithms’: True,
‘run_before_3sigma’: True,
‘run_only_if_consensus’: False,
‘use_with’: [‘analyzer’, ‘analyzer_batch’, ‘mirage’],
‘debug_logging’: False,</p>
</dd>
</dl>
<p>},</p>
</dd></dl>

</section>
<section id="module-custom_algorithms.m66">
<span id="skyline-custom-algorithms-m66-module"></span><h2>skyline.custom_algorithms.m66 module<a class="headerlink" href="#module-custom_algorithms.m66" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.m66.m66">
<span class="sig-name descname"><span class="pre">m66</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/m66.html#m66"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.m66.m66" title="Permalink to this definition"></a></dt>
<dd><p>A time series data points are anomalous if the 6th median is 6 standard
deviations (six-sigma) from the time series 6th median standard deviation
and persists for x_windows, where <cite>x_windows = int(window / 2)</cite>.
This algorithm finds SIGNIFICANT cahngepoints in a time series, similar to
PELT and Bayesian Online Changepoint Detection, however it is more robust to
instaneous outliers and more conditionally selective of changepoints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself for example:
<a href="#id11"><span class="problematic" id="id12">``</span></a>algorithm_parameters={</p>
<blockquote>
<div><p>’nth_median’: 6,
‘sigma’: 6,
‘window’: 5,
‘return_anomalies’ = True,</p>
</div></blockquote>
<p>}``</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
<p>Example CUSTOM_ALGORITHMS configuration:</p>
<dl>
<dt>‘m66’: {</dt><dd><dl class="simple">
<dt>‘namespaces’: [</dt><dd><p>‘skyline.analyzer.run_time’, ‘skyline.analyzer.total_metrics’,
‘skyline.analyzer.exceptions’</p>
</dd>
</dl>
<p>],
‘algorithm_source’: ‘/opt/skyline/github/skyline/skyline/custom_algorithms/m66.py’,
‘algorithm_parameters’: {</p>
<blockquote>
<div><p>‘nth_median’: 6, ‘sigma’: 6, ‘window’: 5, ‘resolution’: 60,
‘minimum_sparsity’: 0, ‘determine_duration’: False,
‘return_anomalies’: True, ‘save_plots_to’: False,
‘save_plots_to_absolute_dir’: False, ‘filename_prefix’: False,
‘return_results’: False, ‘anomaly_window’: 1,</p>
</div></blockquote>
<p>},
‘max_execution_time’: 1.0
‘consensus’: 1,
‘algorithms_allowed_in_consensus’: [‘m66’],
‘run_3sigma_algorithms’: False,
‘run_before_3sigma’: False,
‘run_only_if_consensus’: False,
‘use_with’: [‘crucible’, ‘luminosity’],
‘debug_logging’: False,</p>
</dd>
</dl>
<p>},</p>
<p>The context that you wish to use the algorithm in determines whether
you should set return_anomalies to True or return_results to True or
and anomalies_dict is returned.
The original implementation of this algorithm returned a list of
anomalies if the return_anomalies was set to True, however for the
inclusion as an algorithm that can be used in Vortex, it needed to
be extended to be able to return a results dict.</p>
</dd></dl>

</section>
<section id="module-custom_algorithms.macd">
<span id="skyline-custom-algorithms-macd-module"></span><h2>skyline.custom_algorithms.macd module<a class="headerlink" href="#module-custom_algorithms.macd" title="Permalink to this heading"></a></h2>
<p>macd.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.macd.macd">
<span class="sig-name descname"><span class="pre">macd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/macd.html#macd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.macd.macd" title="Permalink to this definition"></a></dt>
<dd><p>Outlier detection for time-series data using Moving Average Convergence/Divergence
<a class="reference external" href="https://en.wikipedia.org/wiki/MACD">https://en.wikipedia.org/wiki/MACD</a> - EXPERIMENTAL</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  Example:
“algorithm_parameters”: {</p>
<blockquote>
<div><p>”anomaly_window”: 1,
“fast_window”: 12,
“slow_window”: 26,
“signal_window”: 9,
“feature”: “macd”,  # This can be macd, macd_signal or macd_histogram
“return_results”: True,</p>
</div></blockquote>
<p>}</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore, results</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float, dict)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.median_absolute_deviation">
<span id="skyline-custom-algorithms-median-absolute-deviation-module"></span><h2>skyline.custom_algorithms.median_absolute_deviation module<a class="headerlink" href="#module-custom_algorithms.median_absolute_deviation" title="Permalink to this heading"></a></h2>
<p>median_absolute_deviation.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.median_absolute_deviation.median_absolute_deviation">
<span class="sig-name descname"><span class="pre">median_absolute_deviation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/median_absolute_deviation.html#median_absolute_deviation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.median_absolute_deviation.median_absolute_deviation" title="Permalink to this definition"></a></dt>
<dd><p>The last_same_hours algorithm determines the data points for the same hour
and minute as the current timestamp from the last x days and calculates the
mean of those values and determines whether the current data point is within
3 standard deviations of the mean.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any parameters and their
arguments you wish to pass to the algorithm.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.moving_sum_and_value_decrease">
<span id="skyline-custom-algorithms-moving-sum-and-value-decrease-module"></span><h2>skyline.custom_algorithms.moving_sum_and_value_decrease module<a class="headerlink" href="#module-custom_algorithms.moving_sum_and_value_decrease" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.moving_sum_and_value_decrease.moving_sum_and_value_decrease">
<span class="sig-name descname"><span class="pre">moving_sum_and_value_decrease</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/moving_sum_and_value_decrease.html#moving_sum_and_value_decrease"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.moving_sum_and_value_decrease.moving_sum_and_value_decrease" title="Permalink to this definition"></a></dt>
<dd><p>A time series is anomalous if the moving sum datapoint of the window is 0 or
percent_different is greater than the defined percentage_difference and the
datapoint is less than the moving average of the window.  This algorithm is
useful for detecting persistent decreases and drop offs in low resolution
timeseries (one datapoint per day) which do not have constant variability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself for example:
<a href="#id13"><span class="problematic" id="id14">``</span></a>algorithm_parameters={</p>
<blockquote>
<div><p>’window’: 7,
‘percent_different’: 70,
‘less_than_moving_sum_average’: 3,
‘realtime_analysis’: True</p>
</div></blockquote>
<p>}``</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
<p>Example CUSTOM_ALGORITHMS configuration:</p>
<dl>
<dt>‘moving_sum_and_value_decrease’: {</dt><dd><p>‘namespaces’: [‘app1.daily.ad_requests’],
‘algorithm_source’: ‘/opt/skyline/github/skyline/skyline/custom_algorithms/moving_sum_and_value_decrease.py’,
‘algorithm_parameters’: {</p>
<blockquote>
<div><p>‘window’: 7,
‘percentage_difference’: 70,
‘realtime_analysis’: True,</p>
</div></blockquote>
<p>},
‘max_execution_time’: 1.0
‘consensus’: 1,
‘algorithms_allowed_in_consensus’: [‘moving_sum_and_value_decrease’],
‘run_3sigma_algorithms’: True,
‘run_before_3sigma’: True,
‘run_only_if_consensus’: False,
‘use_with’: [‘analyzer’, ‘analyzer_batch’, ‘mirage’],
‘debug_logging’: False,</p>
</dd>
</dl>
<p>},</p>
</dd></dl>

</section>
<section id="module-custom_algorithms.moving_sum_decrease">
<span id="skyline-custom-algorithms-moving-sum-decrease-module"></span><h2>skyline.custom_algorithms.moving_sum_decrease module<a class="headerlink" href="#module-custom_algorithms.moving_sum_decrease" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.moving_sum_decrease.moving_sum_decrease">
<span class="sig-name descname"><span class="pre">moving_sum_decrease</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/moving_sum_decrease.html#moving_sum_decrease"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.moving_sum_decrease.moving_sum_decrease" title="Permalink to this definition"></a></dt>
<dd><p>A time series is anomalous if the moving sum datapoint of the window is 0 or
percent_different is greater than the defined percentage_difference and the
datapoint is less than the moving average of the window.  This algorithm is
useful for detecting persistent decreases and drop offs in low resolution
timeseries (one datapoint per day) which do not have constant variability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself for example:
<a href="#id15"><span class="problematic" id="id16">``</span></a>algorithm_parameters={</p>
<blockquote>
<div><p>’window’: 7,
‘percent_different’: 70,
‘realtime_analysis’: True</p>
</div></blockquote>
<p>}``</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
<p>Example CUSTOM_ALGORITHMS configuration:</p>
<dl>
<dt>‘moving_sum_decrease’: {</dt><dd><p>‘namespaces’: [‘app1.daily.ad_requests’],
‘algorithm_source’: ‘/opt/skyline/github/skyline/skyline/custom_algorithms/moving_sum_decrease.py’,
‘algorithm_parameters’: {</p>
<blockquote>
<div><p>‘window’: 7,
‘percentage_difference’: 70,
‘realtime_analysis’: True,</p>
</div></blockquote>
<p>},
‘max_execution_time’: 1.0
‘consensus’: 1,
‘algorithms_allowed_in_consensus’: [‘moving_sum_decrease’],
‘run_3sigma_algorithms’: True,
‘run_before_3sigma’: True,
‘run_only_if_consensus’: False,
‘use_with’: [‘analyzer’, ‘analyzer_batch’, ‘mirage’],
‘debug_logging’: False,</p>
</dd>
</dl>
<p>},</p>
</dd></dl>

</section>
<section id="module-custom_algorithms.mstl">
<span id="skyline-custom-algorithms-mstl-module"></span><h2>skyline.custom_algorithms.mstl module<a class="headerlink" href="#module-custom_algorithms.mstl" title="Permalink to this heading"></a></h2>
<p>mstl.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.mstl.mstl">
<span class="sig-name descname"><span class="pre">mstl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/mstl.html#mstl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.mstl.mstl" title="Permalink to this definition"></a></dt>
<dd><p>EXPERIMENTAL</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the mstl
custom algorithm no specific algorithm_parameters are required apart
from an empty dict, example: <code class="docutils literal notranslate"><span class="pre">algorithm_parameters={}</span></code>.  But the
number_of_daily_peaks can be passed define how many peaks must exist in
the window period to be classed as normal.  If this is set to 3 and say
that we are checking a possible anomaly at 00:05, there need to be 3
peaks that occur over the past 7 days in the dialy 23:35 to 00:05 window
if there are not at least 3 then this is considered as anomalous.
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters={'number_of_daily_peaks':</span> <span class="pre">3}</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="skyline-custom-algorithms-numba-spectral-residual-module">
<h2>skyline.custom_algorithms.numba_spectral_residual module<a class="headerlink" href="#skyline-custom-algorithms-numba-spectral-residual-module" title="Permalink to this heading"></a></h2>
</section>
<section id="module-custom_algorithms.one_class_svm">
<span id="skyline-custom-algorithms-one-class-svm-module"></span><h2>skyline.custom_algorithms.one_class_svm module<a class="headerlink" href="#module-custom_algorithms.one_class_svm" title="Permalink to this heading"></a></h2>
<p>one_class_svm.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.one_class_svm.one_class_svm">
<span class="sig-name descname"><span class="pre">one_class_svm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/one_class_svm.html#one_class_svm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.one_class_svm.one_class_svm" title="Permalink to this definition"></a></dt>
<dd><p>Outlier detector for time-series data using One Class SVM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  Example:
“algorithm_parameters”: {</p>
<blockquote>
<div><p>”n_neighbors”: 2,
“anomaly_window”: 5,
“return_results”: True,</p>
</div></blockquote>
<p>}</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore, results</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float, dict)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.pca">
<span id="skyline-custom-algorithms-pca-module"></span><h2>skyline.custom_algorithms.pca module<a class="headerlink" href="#module-custom_algorithms.pca" title="Permalink to this heading"></a></h2>
<p>pca.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.pca.pca">
<span class="sig-name descname"><span class="pre">pca</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/pca.html#pca"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.pca.pca" title="Permalink to this definition"></a></dt>
<dd><p>Outlier detector for time-series data using PCA - EXPERIMENTAL</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  Example:
“algorithm_parameters”: {</p>
<blockquote>
<div><p>”n_neighbors”: 2,
“anomaly_window”: 5,
“return_results”: True,</p>
</div></blockquote>
<p>}</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore, results</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float, dict)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.sigma">
<span id="skyline-custom-algorithms-sigma-module"></span><h2>skyline.custom_algorithms.sigma module<a class="headerlink" href="#module-custom_algorithms.sigma" title="Permalink to this heading"></a></h2>
<p>sigma.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.sigma.sigma">
<span class="sig-name descname"><span class="pre">sigma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/sigma.html#sigma"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.sigma.sigma" title="Permalink to this definition"></a></dt>
<dd><p>This is an implementation of the original Skyline 3sigma algorithms as a
single custom algorithm.  It has been extended to allow for the sigma value
to be passed as a parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the anomalous_daily_peak
custom algorithm no specific algorithm_parameters are required apart
from an empty dict, example: <code class="docutils literal notranslate"><span class="pre">algorithm_parameters={}</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.significant_change_window_percent_sustained">
<span id="skyline-custom-algorithms-significant-change-window-percent-sustained-module"></span><h2>skyline.custom_algorithms.significant_change_window_percent_sustained module<a class="headerlink" href="#module-custom_algorithms.significant_change_window_percent_sustained" title="Permalink to this heading"></a></h2>
<p>THIS IS A SAMPLE CUSTOM ALGORITHM to provide a skeleton to develop your own
custom algorithms.  The algorithm itself, although viable, is not recommended for
production or general use, it is simply a toy algorithm here to demonstrate the
structure of a simple custom algorithm that has <code class="docutils literal notranslate"><span class="pre">algorithm_parameters</span></code> passed
as an empty dict {}.
It is documented via comments #</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.significant_change_window_percent_sustained.significant_change_window_percent_sustained">
<span class="sig-name descname"><span class="pre">significant_change_window_percent_sustained</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/significant_change_window_percent_sustained.html#significant_change_window_percent_sustained"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.significant_change_window_percent_sustained.significant_change_window_percent_sustained" title="Permalink to this definition"></a></dt>
<dd><p>A data point is anomalous if it is x percent different from the median of the
window (seconds resample) of the last p period (seconds). A few examples,</p>
<p>If the value is 10% different from the median value of the 10min windows of
the last hour.
algorithm_parameters: {‘window’: 600, ‘percent’: 10.0, ‘period’: 3600}</p>
<p>If the value is 50% different from the median value of the 10min windows of
the last day.
algorithm_parameters: {‘window’: 600, ‘percent’: 50.0, ‘period’: 86400}</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any parameters and their
arguments you wish to pass to the algorithm.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="skyline-custom-algorithms-skyline-fbprophet-module">
<h2>skyline.custom_algorithms.skyline_fbprophet module<a class="headerlink" href="#skyline-custom-algorithms-skyline-fbprophet-module" title="Permalink to this heading"></a></h2>
</section>
<section id="module-custom_algorithms.skyline_matrixprofile">
<span id="skyline-custom-algorithms-skyline-matrixprofile-module"></span><h2>skyline.custom_algorithms.skyline_matrixprofile module<a class="headerlink" href="#module-custom_algorithms.skyline_matrixprofile" title="Permalink to this heading"></a></h2>
<p>THIS IS A MORE FEATUREFUL CUSTOM ALGORITHM to provide a skeleton to develop your
own custom algorithms.  The algorithm itself, although viable, is not
recommended for production or general use, it is simply a toy algorithm here to
demonstrate the structure of a more complex custom algorithm that has
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters</span></code> passed and can also log if enabled.
It is documented via comments #</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.skyline_matrixprofile.skyline_matrixprofile">
<span class="sig-name descname"><span class="pre">skyline_matrixprofile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/skyline_matrixprofile.html#skyline_matrixprofile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.skyline_matrixprofile.skyline_matrixprofile" title="Permalink to this definition"></a></dt>
<dd><p>The skyline_matrixprofile algorithm uses matrixprofile to identify discords.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1578916800.0,</span> <span class="pre">29.0],</span>
<span class="pre">[1578920400.0,</span> <span class="pre">55.0],</span> <span class="pre">...</span> <span class="pre">[1580353200.0,</span> <span class="pre">55.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the matrixprofile custom
algorithm the following parameters are required, example:
<a href="#id17"><span class="problematic" id="id18">``</span></a>algorithm_parameters={</p>
<blockquote>
<div><p>’check_details’: {&lt;empty_dict|check_details dict&gt;},
‘full_duration’: full_duration,
‘windows’: int</p>
</div></blockquote>
<p>}``</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, False or Non</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="skyline-custom-algorithms-skyline-ppscore-module">
<h2>skyline.custom_algorithms.skyline_ppscore module<a class="headerlink" href="#skyline-custom-algorithms-skyline-ppscore-module" title="Permalink to this heading"></a></h2>
</section>
<section id="module-custom_algorithms.skyline_prophet">
<span id="skyline-custom-algorithms-skyline-prophet-module"></span><h2>skyline.custom_algorithms.skyline_prophet module<a class="headerlink" href="#module-custom_algorithms.skyline_prophet" title="Permalink to this heading"></a></h2>
<p>skyline_prophet.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.skyline_prophet.skyline_prophet">
<span class="sig-name descname"><span class="pre">skyline_prophet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/skyline_prophet.html#skyline_prophet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.skyline_prophet.skyline_prophet" title="Permalink to this definition"></a></dt>
<dd><p>Outlier detector for time-series data using the spectral residual algorithm.
Based on the alibi-detect implementation of “Time-Series Anomaly Detection
Service at Microsoft” (Ren et al., 2019) <a class="reference external" href="https://arxiv.org/abs/1906.03821">https://arxiv.org/abs/1906.03821</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the anomalous_daily_peak
custom algorithm no specific algorithm_parameters are required apart
from an empty dict, example:
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters={'return_instance_score':</span> <span class="pre">True}</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore, instance_scores</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float, instance_scores)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.spectral_entropy">
<span id="skyline-custom-algorithms-spectral-entropy-module"></span><h2>skyline.custom_algorithms.spectral_entropy module<a class="headerlink" href="#module-custom_algorithms.spectral_entropy" title="Permalink to this heading"></a></h2>
<p>spectral_entropy.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.spectral_entropy.spectral_entropy">
<span class="sig-name descname"><span class="pre">spectral_entropy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/spectral_entropy.html#spectral_entropy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.spectral_entropy.spectral_entropy" title="Permalink to this definition"></a></dt>
<dd><p>Outlier detection for time-series data using Spectral Entropy.  EXPERIMENTAL
The outlier method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – <p>a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  Example:
“algorithm_parameters”: {</p>
<blockquote>
<div><p>”anomaly_window”: 1,
“window”: 60,
“frequency”: 100,
“max_low_entropy”: 0.6,
“return_results”: True,</p>
</div></blockquote>
<p>}</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore, results</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float, dict)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms.spectral_residual">
<span id="skyline-custom-algorithms-spectral-residual-module"></span><h2>skyline.custom_algorithms.spectral_residual module<a class="headerlink" href="#module-custom_algorithms.spectral_residual" title="Permalink to this heading"></a></h2>
<p>spectral_residual.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.spectral_residual.spectral_residual">
<span class="sig-name descname"><span class="pre">spectral_residual</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms/spectral_residual.html#spectral_residual"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.spectral_residual.spectral_residual" title="Permalink to this definition"></a></dt>
<dd><p>Outlier detector for time-series data using the spectral residual algorithm.
Based on the alibi-detect implementation of “Time-Series Anomaly Detection
Service at Microsoft” (Ren et al., 2019) <a class="reference external" href="https://arxiv.org/abs/1906.03821">https://arxiv.org/abs/1906.03821</a>
For Mirage this algorithm is FAST
For Analyzer this algorithm is SLOW
Although this algorithm is fast, it is not fast enough to be run in Analyzer,
even if only deployed against a subset of metrics.  In testing
spectral_residual took between 0.134828 and 0.698201 seconds to run per
metrics, which is much too long for Analyzer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app executing the algorithm.  This
will be passed to the algorithm by Skyline.  This is <strong>required</strong> for
error handling and logging.  You do not have to worry about handling the
argument in the scope of the custom algorithm itself,  but the algorithm
must accept it as the first agrument.</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the parent pid which is executing the algorithm, this is
<strong>required</strong> for error handling and logging.  You do not have to worry
about handling this argument in the scope of algorithm, but the
algorithm must accept it as the second argument.</p></li>
<li><p><strong>timeseries</strong> (<em>list</em>) – the time series as a list e.g. <code class="docutils literal notranslate"><span class="pre">[[1667608854,</span> <span class="pre">1269121024.0],</span>
<span class="pre">[1667609454,</span> <span class="pre">1269174272.0],</span> <span class="pre">[1667610054,</span> <span class="pre">1269174272.0]]</span></code></p></li>
<li><p><strong>algorithm_parameters</strong> (<em>dict</em>) – a dictionary of any required parameters for the
custom_algorithm and algorithm itself.  For the anomalous_daily_peak
custom algorithm no specific algorithm_parameters are required apart
from an empty dict, example:
<code class="docutils literal notranslate"><span class="pre">algorithm_parameters={'return_instance_score':</span> <span class="pre">True}</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>anomalous, anomalyScore, instance_scores</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple(boolean, float, instance_scores)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-custom_algorithms">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-custom_algorithms" title="Permalink to this heading"></a></h2>
<p>__init__.py</p>
<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.get_function_name">
<span class="sig-name descname"><span class="pre">get_function_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms.html#get_function_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.get_function_name" title="Permalink to this definition"></a></dt>
<dd><p>This is a utility function is used to determine what algorithm is reporting
an algorithm error when the record_algorithm_error is used.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.record_algorithm_error">
<span class="sig-name descname"><span class="pre">record_algorithm_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traceback_format_exc_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms.html#record_algorithm_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.record_algorithm_error" title="Permalink to this definition"></a></dt>
<dd><p>This utility function is used to facilitate the traceback from any algorithm
errors.  The algorithm functions themselves we want to run super fast and
without fail in terms of stopping the function returning and not reporting
anything to the log, so the pythonic except is used to “sample” any
algorithm errors to a tmp file and report once per run rather than spewing
tons of errors into the log.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>algorithm errors tmp file clean up</dt><dd><p>the algorithm error tmp files are handled and cleaned up in
<code class="xref py py-class docutils literal notranslate"><span class="pre">Analyzer</span></code> after all the spawned processes are completed.</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_skyline_app</strong> (<em>str</em>) – the Skyline app</p></li>
<li><p><strong>algorithm_name</strong> (<em>str</em>) – the algoritm function name</p></li>
<li><p><strong>traceback_format_exc_string</strong> (<em>str</em>) – the traceback_format_exc string</p></li>
<li><p><strong>parent_pid</strong> (<em>int</em>) – the pid of the parent process that will be used to in
error file naming</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">True</span></code> the error string was written to the algorithm_error_file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">False</span></code> the error string was not written to the algorithm_error_file</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>boolean</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="custom_algorithms.run_custom_algorithm_on_timeseries">
<span class="sig-name descname"><span class="pre">run_custom_algorithm_on_timeseries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_skyline_app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_algorithm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_algorithm_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug_custom_algortihms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custom_algorithms.html#run_custom_algorithm_on_timeseries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#custom_algorithms.run_custom_algorithm_on_timeseries" title="Permalink to this definition"></a></dt>
<dd><p>Return a dictionary of custom algoritms to run on a metric determined from
the <a class="reference internal" href="skyline.html#settings.CUSTOM_ALGORITHMS" title="settings.CUSTOM_ALGORITHMS"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.CUSTOM_ALGORITHMS</span></code></a> dictionary.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="skyline.crucible.html" class="btn btn-neutral float-left" title="skyline.crucible package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="skyline.flux.html" class="btn btn-neutral float-right" title="skyline.flux package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2014, Etsy Inc; 2015, Abe Stanway; 2015-2023, Gary Wilson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>