<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Running Skyline in a Python 2.7 virtualenv &mdash; Skyline 4.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="../_static/skyline.styles.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Development - dawn-docker" href="dawn-docker.html" />
    <link rel="prev" title="docker" href="docker.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Skyline
          </a>
              <div class="version">
                4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../anomify-cutting-edge-skyline.html">Anomify - cutting edge Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running-in-python-virtualenv.html">Running Skyline in a Python virtualenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-data-into-skyline.html">Getting data into Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alert-testing.html">Alert testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alerts.html">Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slack.html">slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monotonic-metrics.html">Strictly increasing monotonicity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../horizon.html">Horizon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analyzer.html">Analyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analyzer-optimizations.html">Analyzer Optimizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mirage.html">Mirage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../boundary.html">Boundary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crucible.html">Crucible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../panorama.html">Panorama</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webapp.html">Webapp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ionosphere.html">Ionosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ionosphere_echo.html">Ionosphere echo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ionosphere_inference.html">Ionosphere inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ionosphere_learn_repetitive_patterns.html">Ionosphere learning from repetitive patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tsfresh.html">tsfresh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../luminosity.html">Luminosity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flux.html">Flux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upload-data-to-flux.html">upload_data to Flux - EXPERIMENTAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prometheus.html">Prometheus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vortex.html">Vortex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thunder/index.html">Thunder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vista.html">Vista</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SNAB.html">SNAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_settings.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">settings.EXTERNAL_SETTINGS</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../redis-integration.html">Redis integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rebrow.html"><span class="red">re</span><span class="brow">brow</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="../running-multiple-skylines.html">Running multiple Skyline instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="../skyline-and-friends.html">Skyline and friends</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tuning-tips.html">Tuning tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring-skyline.html">Monitoring Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../skyline_metrics.html"><span class="skyblue">Sky</span><span class="red">line</span> metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../opentelemetry.html">opentelemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Trouble shooting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Deprecated docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="debian-and-vagrant-installation-tips.html">Debian and Vagrant Installation Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">docker</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Running Skyline in a Python 2.7 virtualenv</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sudo"><code class="docutils literal notranslate"><span class="pre">sudo</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#howto-python-virtualenv-skyline">HOWTO Python virtualenv Skyline</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#virtualenv">virtualenv</a></li>
<li class="toctree-l3"><a class="reference internal" href="#openssl-optional">openssl (optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-version">Python version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-skyline-python-virtualenv">Create a Skyline Python virtualenv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dawn-docker.html">Development - dawn-docker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats-new.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../skyline.html">skyline package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Skyline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Deprecated docs</a></li>
      <li class="breadcrumb-item active">Running Skyline in a Python 2.7 virtualenv</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/deprecated-docs/running-in-python-virtualenv-py2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="running-skyline-in-a-python-2-7-virtualenv">
<h1>Running Skyline in a Python 2.7 virtualenv<a class="headerlink" href="#running-skyline-in-a-python-2-7-virtualenv" title="Permalink to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is no longer supported with the EOL of Python 2 but this documentation
remains for anyone still using py2 until it does not work any longer.</p>
</div>
<p>Running Skyline in a Python virtualenv is the recommended way to run
Skyline. This allows for Skyline apps and all dependencies to be
isolated from the system Python version and packages and allows Skyline
be be run with a specific version of Python and as importantly specific
versions of the dependencies packages.</p>
<p>The possible overhead of adding Python virtualenv functionality to any
configuration management is probably worth the effort in the long run.</p>
<section id="sudo">
<h2><code class="docutils literal notranslate"><span class="pre">sudo</span></code><a class="headerlink" href="#sudo" title="Permalink to this heading"></a></h2>
<p>Use <code class="docutils literal notranslate"><span class="pre">sudo</span></code> appropriately for your environment wherever necessary.</p>
<section id="howto-python-virtualenv-skyline">
<h3>HOWTO Python virtualenv Skyline<a class="headerlink" href="#howto-python-virtualenv-skyline" title="Permalink to this heading"></a></h3>
</section>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>Building Python versions from the Python sources in Python virtualenv
requires the following system dependencies:</p>
<ul class="simple">
<li><p>RedHat family</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>epel-release
yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>autoconf<span class="w"> </span>zlib-devel<span class="w"> </span>openssl-devel<span class="w"> </span>sqlite-devel<span class="w"> </span>bzip2-devel<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>gcc<span class="w"> </span>gcc-c++<span class="w"> </span>readline-devel<span class="w"> </span>ncurses-devel<span class="w"> </span>gdbm-devel<span class="w"> </span>compat-readline5<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>freetype-devel<span class="w"> </span>libpng-devel<span class="w"> </span>python-pip<span class="w"> </span>wget<span class="w"> </span>tar<span class="w"> </span>git
</pre></div>
</div>
<ul class="simple">
<li><p>Debian family</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>build-essential
apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>autoconf<span class="w"> </span>zlib1g-dev<span class="w"> </span>libssl-dev<span class="w"> </span>libsqlite3-dev<span class="w"> </span>libbz2-dev<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libreadline6-dev<span class="w"> </span>libgdbm-dev<span class="w"> </span>libncurses5<span class="w"> </span>libncurses5-dev<span class="w"> </span>libncursesw5<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libfreetype6-dev<span class="w"> </span>libxft-dev<span class="w"> </span>python-pip<span class="w"> </span>wget<span class="w"> </span>tar<span class="w"> </span>git
</pre></div>
</div>
</section>
<section id="virtualenv">
<h2>virtualenv<a class="headerlink" href="#virtualenv" title="Permalink to this heading"></a></h2>
<p>Regardless of your OS as long as you have pip installed you can install
virtualenv. <em>NOTE:</em> if you are using a version of Python virtualenv
already, this may not suit your setup.</p>
<p>virtualenv must be &gt;= 15.0.1 and &lt;16.0.0 due to some recent changes in pip,
setuptools and virtualenv, see <strong>Recent changes in the pip environment</strong> section
in <a class="reference external" href="requirements.html#recent-changes-in-the-pip-environment">Requirements</a>
for more details.</p>
<p>This is using your <strong>system</strong> pip at this point only to install virtualenv.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span><span class="s1">&#39;virtualenv==15.2.0&#39;</span>
</pre></div>
</div>
</section>
<section id="openssl-optional">
<h2>openssl (optional)<a class="headerlink" href="#openssl-optional" title="Permalink to this heading"></a></h2>
<p>Depending on your OS if it is a bit older you may need to compile Python with a
newer version of openssl.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">openssl_version</span><span class="o">=</span><span class="s2">&quot;1.1.1g&quot;</span>
mkdir<span class="w"> </span>/opt/openssl
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;/usr/local/openssl/openssl-</span><span class="si">${</span><span class="nv">openssl_version</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">cd</span><span class="w"> </span>/opt/openssl
wget<span class="w"> </span>-q<span class="w"> </span><span class="s2">&quot;https://www.openssl.org/source/openssl-</span><span class="si">${</span><span class="nv">openssl_version</span><span class="si">}</span><span class="s2">.tar.gz&quot;</span>
tar<span class="w"> </span>-zxvf<span class="w"> </span><span class="s2">&quot;openssl-</span><span class="si">${</span><span class="nv">openssl_version</span><span class="si">}</span><span class="s2">.tar.gz&quot;</span>
<span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;/opt/openssl/openssl-</span><span class="si">${</span><span class="nv">openssl_version</span><span class="si">}</span><span class="s2">&quot;</span>
/opt/openssl/openssl-<span class="si">${</span><span class="nv">openssl_version</span><span class="si">}</span>/config<span class="w"> </span>--prefix<span class="o">=</span>/usr/local/openssl/openssl-<span class="si">${</span><span class="nv">openssl_version</span><span class="si">}</span><span class="w"> </span>--openssldir<span class="o">=</span>/usr/local/openssl/openssl-<span class="si">${</span><span class="nv">openssl_version</span><span class="si">}</span>
make
make<span class="w"> </span>install
</pre></div>
</div>
</section>
<section id="python-version">
<h2>Python version<a class="headerlink" href="#python-version" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Python-2.7.14 should still work as well, but all documentation has
been updated to use Python-2.7.16.</p>
</div>
<p>Below we use the path <code class="docutils literal notranslate"><span class="pre">/opt/python_virtualenv</span></code>, which you can substitute
with any path you choose.  We are going to use the Python-2.7.16 source and
build and install an isolated Python-2.7.16, this has no effect on your system
Python:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">PYTHON_VERSION</span><span class="o">=</span><span class="s2">&quot;2.7.16&quot;</span>
<span class="nv">PYTHON_MAJOR_VERSION</span><span class="o">=</span><span class="s2">&quot;2.7&quot;</span>
<span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="o">=</span><span class="s2">&quot;/opt/python_virtualenv&quot;</span>

mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="si">}</span><span class="s2">/versions/</span><span class="si">${</span><span class="nv">PYTHON_VERSION</span><span class="si">}</span><span class="s2">&quot;</span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="si">}</span><span class="s2">/projects&quot;</span>

<span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="si">}</span><span class="s2">/versions/</span><span class="si">${</span><span class="nv">PYTHON_VERSION</span><span class="si">}</span><span class="s2">&quot;</span>
wget<span class="w"> </span>-q<span class="w"> </span><span class="s2">&quot;https://www.python.org/ftp/python/</span><span class="si">${</span><span class="nv">PYTHON_VERSION</span><span class="si">}</span><span class="s2">/Python-</span><span class="si">${</span><span class="nv">PYTHON_VERSION</span><span class="si">}</span><span class="s2">.tgz&quot;</span>
tar<span class="w"> </span>-zxvf<span class="w"> </span><span class="s2">&quot;Python-</span><span class="si">${</span><span class="nv">PYTHON_VERSION</span><span class="si">}</span><span class="s2">.tgz&quot;</span>

<span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="si">}</span>/versions/<span class="si">${</span><span class="nv">PYTHON_VERSION</span><span class="si">}</span>/Python-<span class="si">${</span><span class="nv">PYTHON_VERSION</span><span class="si">}</span>
./configure<span class="w"> </span>--prefix<span class="o">=</span><span class="si">${</span><span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="si">}</span>/versions/<span class="si">${</span><span class="nv">PYTHON_VERSION</span><span class="si">}</span>
make

<span class="c1"># Optionally here if you have the time or interest you can run</span>
<span class="c1"># make test</span>

make<span class="w"> </span>altinstall
</pre></div>
</div>
<p>You will now have a Python-2.7.16 environment with the Python
executable: <code class="docutils literal notranslate"><span class="pre">/opt/python_virtualenv/versions/2.7.16/bin/python2.7</span></code></p>
</section>
<section id="create-a-skyline-python-virtualenv">
<h2>Create a Skyline Python virtualenv<a class="headerlink" href="#create-a-skyline-python-virtualenv" title="Permalink to this heading"></a></h2>
<p>A word of warning relating to pip, setuptools and distribute if you have
opted not to use the above as you have Python virtualenv already. As of
virtualenv 15.0.1 the pip community adopted the new pkg_resources
_markerlib package structure, which means the following in the
virtualenv context:</p>
<ul class="simple">
<li><p>distribute cannot be installed</p></li>
<li><p>pip must be &gt;=8.1.0</p></li>
<li><p>setuptools must be &gt;=20.2.2</p></li>
</ul>
<p>Once again using Python-2.7.16:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">PYTHON_VERSION</span><span class="o">=</span><span class="s2">&quot;2.7.16&quot;</span>
<span class="nv">PYTHON_MAJOR_VERSION</span><span class="o">=</span><span class="s2">&quot;2.7&quot;</span>
<span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="o">=</span><span class="s2">&quot;/opt/python_virtualenv&quot;</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="s2">&quot;skyline-py2716&quot;</span>

<span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="si">}</span><span class="s2">/projects&quot;</span>
virtualenv<span class="w"> </span>--python<span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PYTHON_VIRTUALENV_DIR</span><span class="si">}</span><span class="s2">/versions/</span><span class="si">${</span><span class="nv">PYTHON_VERSION</span><span class="si">}</span><span class="s2">/bin/python</span><span class="si">${</span><span class="nv">PYTHON_MAJOR_VERSION</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PROJECT</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Make sure to add the <code class="docutils literal notranslate"><span class="pre">/etc/skyline/skyline.conf</span></code> file - see
<a class="reference external" href="installation.html">Installation</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="docker.html" class="btn btn-neutral float-left" title="docker" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dawn-docker.html" class="btn btn-neutral float-right" title="Development - dawn-docker" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2014, Etsy Inc; 2015, Abe Stanway; 2015-2023, Gary Wilson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>