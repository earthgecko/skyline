{% extends "layout.html" %}
{% block body %}

<!-- BEGIN /now block -->
  <script src="/static/js/skyline.js"></script>
	<ol class="breadcrumb">
		<li><a href="/">Home</a></li>
		<li><a href="/api">api</a></li>
		<li class="active"><span class="logo"><span class="sky">api</span> <span class="re">documentation</span></li>
	</ol>


	  <h3><span class="logo"><span class="sky">API and Admin methods ::</span> <span class="re">documentation</span></span></h3>

	  <h5><span class="logo"><span class="sky">NOTE</span> <span class="re">When running a Skyline cluster</span></span></h5>
    When <span class="logo"><span class="sky">Sky</span><span class="re">line</span></span> is running as a distributed
    cluster, a lot of API requests can be passed the <code>cluster_data=true</code> parameter so that any of the Skyline cluster
    nodes can fetch the data from a remote Skyline node.  This request parameter can be passed on every API request and
    it is only referenced if Skyline is running in clustered mode, if not it is simply ignored.<br>
    If any below API methods do not have it specified it means that each individual node of the cluster has to be queried
    for that method.<br>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?airgapped_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all metrics which have been identified as having airgaps within the <code>settings.MAX_AIRGAP_PERIOD</code> as a json object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?airgapped_metrics">/api?airgapped_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?airgapped_metrics</code></td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "metrics": [
      "['remote_hosts.graphite-labs_wikimedia_org.cloudinfra.cloudinfra-db01.cpu.total.idle', 60, 1580907541, 1580907899, 0]",
      "['remote_hosts.graphite-labs_wikimedia_org.cloudinfra.cloudinfra-db01.cpu.total.iowait', 60, 1580907541, 1580907899, 0]"
    ]
  },
  "status": {}
}</code><br>
Or if no airgapped metrics are present <code>{"data":{"metrics":[]},"status":{}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?airgap_filled</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Removes a metric airgap from the analyzer.airgapped_metrics Redis set.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?airgap_filled</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>metric=[metric_name | str | <font color=red>required</font>]<br>
                  resolution=[resolution/frequency in seconds | int | <font color=red>required</font>]<br>
                  start=[unix timestamp | int | <font color=red>required</font>]<br>
                  end=[unix timestamp | int | <font color=red>required</font>]<br>
                  attempts=[number of attempts in fill the metric | int | <font color=red>required</font>]<br>
                  <code>NOTE: the number of attempts must match the number of attempts that were returned in the airgapped_metrics</code><br>
                  <code>for the airgap, it must not be incremented as it is used to match the airgap item in the Redis set for removal.</code><br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?airgap_filled&metric=test.metric&resolution=60&start=1580926312&end=1580926712&attempts=0</code></td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - airgapped metric item removed with json response, example
                  <code>{
  "data": {
    "removed_airgap": [
      "test.metric",
      60,
      1580926312,
      1580926712,
      0
    ]
  },
  "status": {}
}</code><br>
                  400 - bad parameter<br>
                  404 - airgap metric entry not found<br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?alerting_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all metrics which have SMTP alerting enabled on them as a json object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?alerting_metrics">/api?alerting_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?alerting_metrics</code><br>
              <code>/api?alerting_metrics&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "metrics": [
      "test.metric",
      "vista.nodes.skyline-1.cpu.user"
    ]
  },
  "status": {}
}</code><br>
Or if no metrics of no metrics are set to alert <code>{"data":{"metrics":[]},"status":{}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?analyzer_last_status</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the last timestamp that Analyzer ran as a json object.  The Redis analyzer key is set every run with a TTL of 120 seconds<br>
                  If the Redis key does not exist the request is responded to with HTTP status code <code>410 GONE</code>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?analyzer_last_status">/api?analyzer_last_status</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?analyzer_last_status</code></td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{"data":{"timestamp":1604421547},"status":{}}
</code><br>
Or if Analyzer has not run in 120 seconds <code>{"data":{"timestamp":null},"status":{}}</code> with status code 410<br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?anomaly</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the information about an anomaly as a json object, with cross_correlations, possible_related_matches and possible_related_anomalies<br>
                  If the anomaly is in progress the end_timestamp value returned will be null e.g. <code>"end_timestamp": null,</code>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?anomaly</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>anomaly=[true | boolean | <font color=red>required</font>]<br>
                  id=[anomaly id | int | <font color=red>required</font>]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?anomaly=true&id=12345</code><br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 with json response<br>
<code>{
  "data": {
    "anomaly": {
      "cross correlations": {
        "server-12345.cpu-total.cpu.usage_iowait": {
          "coefficient": 0.94491,
          "shifted": 0,
          "shifted_coefficient": 0.94491
        },
        "server-12345.cpu-total.cpu.usage_irq": {
          "coefficient": 0.99733,
          "shifted": 0,
          "shifted_coefficient": 0.99733
        },
        ...
      },
      "end_timestamp": 1599558120,
      "id": "12345",
      "metric": "server-12345.cpu-total.cpu.usage_user",
      "possible related anomaly ids": {
        "12344": {
          "metric": "server-12345.cpu-total.cpu.usage_irq",
          "timestamp": 1599558060
        },
        ...
        ...
      },
      "possible related match ids": {
        "169524": {
          "fp id": 8815,
          "layer id": "None",
          "matched by": "features profile - minmax - echo",
          "metric": "server-12345.cpu-total.cpu.usage_system",
          "timestamp": 1599558060
        },
        ...
        ...
      },
      "timestamp": 1599558120,
      "value": 62
    }
  },
  "status": {}
}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?batch_processing_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all batch processing metrics as a json object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?batch_processing_metrics">/api?batch_processing_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?batch_processing_metrics</code><br>
              <code>/api?batch_processing_metrics&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "metrics": [
      "vista.demo_robustperception_io.prometheus.node_memory_MemAvailable_bytes",
      "vista.demo_robustperception_io.prometheus.node_disk_io_time_weighted_seconds_total"
    ]
  },
  "status": {}
}</code><br>
Or if no batch processing metrics are present <code>{"data":{"metrics":[]},"status":{}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?boundary_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all boundary metrics and their algorithm and alert settings (optionally that match metric or namespace patterns) as a json object.
              Optionally you can filter on namepsace patterns as well, passing them as a </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?boundary_metrics">/api?boundary_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?boundary_metrics</code><br>
              <code>/api?boundary_metrics&cluster_data=true</code> [optional for clustered Skyline]<br>
              <code>/api?boundary_metrics&metric=[metric_name]</code> [optional]<br>
              <code>/api?boundary_metrics&namespaces=[comma separated namespace patterns]</code> [optional]<br>
              <code>/api?boundary_metrics&namespaces=carbon,cswellsurf</code> e.g.<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "metrics": {
      "metrics.test.metric": {},
      "metrics.vista.nodes.skyline-1.cpu.user": {}
    }
  },
  "status": {}
}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?derivative_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all metrics (with their FULL_NAMESPACE metric name) have identified as derivative metrics as a json object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?derivative_metrics">/api?derivative_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?derivative_metrics</code><br>
              <code>/api?derivative_metrics&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "metrics": [
      "metrics.test.metric",
      "metrics.vista.nodes.skyline-1.cpu.user"
    ]
  },
  "status": {}
}</code><br>
Or if no metrics if no metrics are derivative metrics <code>{"data":{"metrics":[]},"status":{}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?determine_data_sparsity</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the data sparsity for a metrics as a json object. A sparsity value of 100 is fully populated, a value of 1 is almost no data<br>
                  The sparsity value can be greater than 100 because with fully populated metrics, hey can have MORE data than FULL_DURATION until roomba prunes.
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?determine_data_sparsity&metric=[base_name | str]</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?determine_data_sparsity&metric=vista.graphite-labs_wikimedia_org.cloudinfra.cloud-cumin-01.memory.Active</code><br>
		          <code>/api?determine_data_sparsity&metric=rvista.graphite-labs_wikimedia_org.cloudinfra.cloud-cumin-01.memory.Active&cluster_data=true</code> [optional for clustered Skyline]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{"data":{"sparsity":{"vista.graphite-labs_wikimedia_org.cloudinfra.cloud-cumin-01.memory.Active":100.42}},"status":{"response":200}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?external_settings</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a dictionary of external_settings as a json object. Optionally you can filter on namepsace. Tokens are REDACTED</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?external_settings">/api?external_settings</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?external_settings</code><br>
              <code>/api?external_settingss&cluster_data=true</code> [optional for clustered Skyline]<br>
              <code>/api?external_settings&namespace=[namespace]</code> [optional]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
      "alert_on_no_data": {
        "enabled": true,
        "expiry": 1800,
        "stale_period": 300
      },
      "alert_on_stale_metrics": {
        "enabled": true,
        "expiry": 0,
        "stale_period": 900
      },
      "flux_token": "REDACTED",
      "full_duration": 86400,
      "id": "test_external_settings",
      "learn_full_duration_seconds": 2592000,
      "namespace": "skyline-test-external-settings",
      "retention_1_period_seconds": 604800,
      "retention_1_resolution_seconds": 60,
      "retention_2_period_seconds": 63072000,
      "retention_2_resolution_seconds": 600,
      "second_order_resolution_seconds": 604800,
      "thunder_alert_endpoint": "http://127.0.0.1:1500/mock_api?alert_reciever",
      "thunder_alert_token": "REDACTED"
  },
  "status": {"cluster_data": false, "request_time": 0.0032482019159942865, "response": 200}
}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/flux/metric_data</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Allows to submit a metric, timestamp and value to Flux to send to Graphite.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/flux/metric_data</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>metric=[metric_name | str | <font color=red>required</font>]<br>
                  timestamp=[unix timestamp | int | <font color=red>required</font>]<br>
                  value=[value | float | <font color=red>required</font>]<br>
                  key=[API key | str | <font color=red>required</font>]<br>
                  fill=[whether this is backfill | boolean | optional]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/flux/metric_data?metric=vista.nodes.skyline-1.cpu.user&amp;timestamp=1478021700&value=1.0&key=YOURown32charSkylineAPIkeySecret</code><br>
                  <code>/flux/metric_data?metric=vista.nodes.skyline-1.cpu.user&amp;timestamp=1478021700&value=1.0&key=YOURown32charSkylineAPIkeySecret&fill=true</code>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>204<br>
                  200 - if in debug mode and returns a json response with the query_string, request parameters and values and the metric data submitted<br>
                  400 - bad parameter<br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/flux/metric_data_post</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Allows to submit a metric, timestamp and value to Flux to send to Graphite.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/flux/metric_data_post</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>POST</td>
  		      </tr>
  		      <tr>
  		        <td>Request data example:</td>
		          <td>
{
    "metric": "metric|str",
    "timestamp": "timestamp|int",
    "value": "value|float",
    "key": "api_key|str",
    "fill": "boolean|optional"
}
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>204<br>
                  200 - if in debug mode and returns a json response with the posted data<br>
                  400 - missing parameter in post data<br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?get_analysed_events</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the number of analysed events per namespace and app or for a specific namespace per app for the period defined.<br>
                  If the timestamps are not midnight UTC timestamps then the first day's total are estimated based on the number of minutes that have
                  passed in the current day.<br>
                  This means that for the until_timestamp represent 12:00 for the current data and the from_timestamps represents 12:00 a week ago,<br>
                  the totals for the first day will be estimated by <code>(total / 1440) * 720</code>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?get_analysed_events</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>from_timestamp=[unix timestamp | int | <font color=red>required</font>]<br>
                  until_timestamp=[unix timestamp | int | <font color=red>required</font>]<br>
                  namespace=[parent_namespace | str | optional]<br>
                  cluster_data=[true | bool | [optional for clustered Skyline]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?get_analysed_events=true&from_timestamp=1650462105&until_timestamp=1651671729</code><br>
		          <code>/api?get_analysed_events=true&from_timestamp=1650462105&until_timestamp=1651671729&namespace=telegraf</code><br>
		          <code>/api?get_analysed_events=true&from_timestamp=1650462105&until_timestamp=1651671729&cluster_data=true</code> [optional for clustered Skyline]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 with json response<br>
<code>{"data":{
"analysed_events":{
"analyzer":{
"carbon":278063,
"cswellsurf":346193,
"otel":142980,
"skyline":524935,
"skyline-syslog":385383,
"telegraf":3062908,
"vista":234796},
"analyzer_batch":{
"vista":236088},
"boundary":{
"carbon":74182,
"cswellsurf":55405,
"skyline":92524,
"telegraf":296112},
"estimated_from_timestamp":1650499185,
"from":1650462105,
"mirage":{
"carbon":311,
"otel":262,
"skyline":1103,
"skyline-syslog":830,
"telegraf":11129},
"total":5743204,
"total_analysed_events":{
"carbon":352556,
"cswellsurf":401598,
"otel":143242,
"skyline":618562,
"skyline-syslog":386213,
"telegraf":3370149,
"vista":470884},
"until":1651671729}},
"status":{
"cluster_data":false,
"request_time":0.03727630153298378,
"response":200}}</code><br>
200 with json response for request passed with the namespace parameter<br>
<code>{"data":{"analysed_events":{"analyzer":{"telegraf":3062908},"boundary":{"telegraf":296112},"estimated_from_timestamp":1650499185,"from":1650462105,"mirage":{"telegraf":11129},"total_analysed_events":{"telegraf":3370149},"until":1651671729}},"status":{"cluster_data":false,"request_time":0.023266267031431198,"response":200}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?get_json</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the time series for a metric from the training data or features profile as a json object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?get_json</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>get_json=[true | boolean | <font color=red>required</font>]<br>
                  metric=[metric_name | str | <font color=red>required</font>]<br>
                  timestamp=[unix timestamp | int | <font color=red>required</font>]<br>
                  source=[features_profile|training_data | str | <font color=red>required</font>]<br>
                  full_duration_data=[whether to return FULL_DURATION time series | boolean | optional]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?get_json=true&source=features_profile&amp;timestamp=1553711508&metric=test.metric&full_duration_data=true</code><br>
                  <code>/api?get_json=true&source=features_profile&amp;timestamp=1553711508&metric=test.metric&full_duration_data=true</code><br>
                  <code>/api?get_json=true&source=training_data&amp;timestamp=1553711909&metric=test.metric</code><br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 with json response<br>
<code>{
  "datapoints": [
    [
      1486749694,
      1
    ],
    [
      1486749704,
      0
    ],
..., ...,
    [
      1486836735,
      0
    ]
  ],
  "metric": "stats.statsd.graphiteStats.calculationtime"
}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?get_metric_analysed_events</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the number of analysed events for a metric per app for the period defined.<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?get_metric_analysed_events</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>from_timestamp=[unix timestamp | int | <font color=red>required</font>]<br>
                  until_timestamp=[unix timestamp | int | <font color=red>required</font>]<br>
                  namespace=[parent_namespace | str | optional]<br>
                  cluster_data=[true | bool | [optional for clustered Skyline]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?get_metric_analysed_events=true&metric=telegraf.26820.cpu-total.cpu.usage_idle&from_timestamp=1650462105&until_timestamp=1651671729</code><br>
		          <code>/api?get_metric_analysed_events=true&metric=telegraf.26820.cpu-total.cpu.usage_idle&from_timestamp=1650462105&until_timestamp=1651671729&cluster_data=true</code> [optional for clustered Skyline]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 with json response<br>
<code>{
  "data": {
    "analysed_events": {
      "analyzer": 21143,
      "boundary": 21143,
      "from": 1650462105,
      "metric": "telegraf.26820.cpu-total.cpu.usage_idle",
      "total": 42286,
      "until": 1651671729
    }
  },
  "status": {
    "cluster_data": false,
    "request_time": 0.8154124729335308,
    "response": 200
  }
}</code>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?graphite_metric</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the time series for a metric from Graphite as a PJSON object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?graphite_metric</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>metric=[metric_name | str | <font color=red>required</font>]<br>
                  from_timestamp=[unix timestamp | int | <font color=red>required</font>]<br>
                  until_timestamp=[unix timestamp | int | <font color=red>required</font>]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?graphite_metric=stats.statsd.graphiteStats.calculationtime&from_timestamp=1580998701&until_timestamp=1580999701</code><br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 with json response<br>
<code>{"results": [[1580998730.0, 0.0], [1580998790.0, 0.0], ..., [1580999690.0, 0.0]]}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?inactive_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a dictionary of inactive_metrics as a json object. Optionally you can filter on namepsace.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?inactive_metrics">/api?inactive_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?inactive_metrics</code><br>
              <code>/api?inactive_metricss&cluster_data=true</code> [optional for clustered Skyline]<br>
              <code>/api?inactive_metrics&namespace=[namespace]</code> [optional]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
      "metrics": [
        "server-1.cpu.total",
        "server-1.cpu.user"
      ]
  },
  "status": {"cluster_data": false, "request_time": 0.0032482019159942865, "response": 200}
}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?ionosphere_learn_work</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all the pending Ionosphere learn work in the ionosphere.learn.work Redis set as a json object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?ionosphere_learn_work">/api?ionosphere_learn_work</a><br>
              <a target='_blank' href="/api?ionosphere_learn_work&format=json">/api?ionosphere_learn_work&format=json</a>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>format=json [optional]</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?ionosphere_learn_work</code><br>
              <code>/api?ionosphere_learn_work&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response with strings of lists for literal_eval, example
                  <code>
{
  "data": {
    "metrics": [
      "['Soft', 'learn_fp_generation', 1580995360, 'test.metric', None, None]",
      "['Soft', 'learn_fp_human', 1580995460, 'test.metric.other', 123, 3]"
    ]
  },
  "status": {}
}</code><br>
Or if no metrics if all metrics are set to alert <code>{"data":{"metrics":[]},"status":{}}</code>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?ionosphere_learn_work&format=json</code></td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
              <td>200 - pure json response, example
              <code>
{
  "data": {
    "metrics": {
      "test.metric": {
        "deadline_type": "Soft",
        "generation": 0,
        "job_type": "learn_fp_generation",
        "parent_id": 0,
        "timestamp": 1580995360
      },
      "test.metric.other": {
        "deadline_type": "Soft",
        "generation": 3,
        "job_type": "learn_fp_human",
        "parent_id": 123,
        "timestamp": 1580995460
      }
    }
  },
  "status": {}
}</code><br>
Or if no metrics if all metrics are set to alert <code>{"data":{"metrics":{}},"status":{}}</code>
<br>
The items are as defined in <a target='_blank' href="https://earthgecko-skyline.readthedocs.io/en/latest/skyline.ionosphere.html#ionosphere.learn.ionosphere_learn">https://earthgecko-skyline.readthedocs.io/en/latest/skyline.ionosphere.html#ionosphere.learn.ionosphere_learn</a>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?ionosphere_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all Ionosphere enabled metrics (with their FULL_NAMESPACE metric name) as a json object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?ionosphere_metrics">/api?ionosphere_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?ionosphere_metrics</code><br>
              <code>/api?ionosphere_metrics&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "metrics": [
      "metrics.test.metric",
      "metrics.vista.nodes.skyline-1.cpu.user"
    ]
  },
  "status": {}
}</code><br>
Or if no metrics if no metrics are Ionosphere enabled metrics <code>{"data":{"metrics":[]},"status":{}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?last_analyzed_timestamp</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the last timestamp that Analyzer analysed for a metric.<br>
                  If a timestamp for the metric does not exist the request is responded to with HTTP status code <code>400</code>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?last_analyzed_timestamp">/api?last_analyzed_timestamp</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>metric=[metric_name | str | <font color=red>required</font>]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?last_analyzed_timestamp&metric=stats.statsd.graphiteStats.calculationtime</code><br>
		          <code>/api?last_analyzed_timestamp&metric=stats.statsd.graphiteStats.calculationtime&cluster_data=true</code> [optional for clustered Skyline]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Response:</td>
  		        <td>200 - json response, example
                  <code>
{"data":{"last_analyzed_timestamp":1613564520,"metric":"stats.statsd.graphiteStats.calculationtime"},"status":{"cluster_data":true,"remote_data":false,"request_time":0.001747,"response":200}}
</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?metric</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the time series for a metric from Redis as a PJSON object (or optionally as a json object).</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?metric</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>metric=[FULL_NAMESPACE + metric_name OR metric name (without FULL_NAMESPACE)| str | <font color=red>required</font>]<br>
  		        format=[json | str | optional]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?metric=metrics.stats.statsd.graphiteStats.calculationtime</code><br>
              <code>/api?metric=skyline.horizon.skyline-1.worker.queue_size&format=json</code><br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 with PJSON response<br>
<code>{"results": [[1580912307.0, 1.0], [1580912367.0, 1.0], ..., ..., , [1580999271.0, 0.0]]}</code><br>
200 with json response<br>
<code>{"data":{"metric":"skyline.horizon.skyline-1.worker.queue_size","timeseries":[[1618482596.0,8.0],[1618482609.0,64.0],...[1618569636.0,0.42857142857142855]]},"status":{...,"response":200}}<code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?metrics_resolutions</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the resolution/frequency for each metric.<br>
                  The <code>namespace</code>, <code>remove_prefix</code>, <code>less_than</code>, <code>greater_than</code> and <code>count_by_resolution</code> request arguments can be optionally passed to
                  filter by namespace and/or remove a namespace prefix and return results for metrics that have a resolution less or greater than a specified value/s.<br>
                  The <code>count_by_resolution</code> request argument will return the metrics per resolution.<br>
                  <code>namespace</code> represents the top level or leading namespace elements, this is not a regex it is a startswith comparison.<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?metrics_resolutions=true">/api?metrics_resolutions</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?metrics_resolutions</code><br>
                  <code>/api?metrics_resolutions&namespace=skyline</code><br>
                  <code>/api?metrics_resolutions&namespace=telegraf&remove_prefix=telegraf&less_than=20</code><br>
                  <code>/api?metrics_resolutions&less_than=86400&greater_than=3600</code><br>
                  <code>/api?metrics_resolutions&count_by_resolution=true</code><br>
                  <code>/api?metrics_resolutions&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, <code>greater_than=3600</code> example:
                  <code>{
  "data": {
    "resolution_results_count": 1,
    "resolutions": {
      "cswellsurf.buoys.cabo_begur.cswellsurf.realtime_seconds_lag": 3603,
    }
  },
  "status": {
    "cluster_data": false,
    "request_time": 0.02825656719505787,
    "response": 200
  }
}</code><br>
<code>count_by_resolution=true&greater_than=3600</code> example:
<code>{
  "data": {
    "resolution_results_count": 1,
    "resolutions": {
      "3603": {
        "count": 1,
        "metrics": [
          "cswellsurf.buoys.cabo_begur.cswellsurf.realtime_seconds_lags",
        ]
      }
    }
  },
  "status": {
    "cluster_data": false,
    "request_time": 0.0072784703224897385,
    "response": 200
  }
}</code><br>
Or if no resolutions exists for the namespace <code>{"data":{"resolution_results_count":0,"resolutions":"null"},"status":{"cluster_data":false,"request_time":0.006524922326207161,"response":404}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?metrics_sparsity</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns sparsity for each metric that is not in <code>settings.SKIP_CHECK_DATA_SPARSITY_NAMESPACES</code><br>
                  The <code>namespace</code>, <code>remove_prefix</code> and <code>below</code> request arguments can be optionally passed to
                  filter by namespace and/or remove a namespace prefix and return results for metrics that have a sparsity below a specified value.<br>
                  <code>namespace</code> represents the top level or leading namespace elements, this is not a regex it is a startswith comparison.<br>
                  <code>below</code> represents the sparsity value by which to filter metrics on, where a sparsity value >= 100.0% is a fully populated metric time series, 0.14% is a time series with almost no values.<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?metrics_sparsity=true">/api?metrics_sparsity</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?metrics_sparsity</code><br>
                  <code>/api?metrics_sparsity&namespace=skyline</code><br>
                  <code>/api?metrics_sparsity&namespace=telegraf&remove_prefix=telegraf&below=20</code><br>
                  <code>/api?metrics_sparsity&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>{
  "data": {
    "sparsity": {
      "carbon.relays.graphite-doa2-a.destinations.0_0_0_0:2004:None.fullQueueDrops": 0.08,
      "carbon.relays.graphite-doa2-a.destinations.0_0_0_0:2024:None.fullQueueDrops": 0.08,
      "carbon.relays.graphite-doa2-a.destinations.0_0_0_0:2024:None.queuedUntilReady": 0.49,
    },
    "sparsity_results_count": 3
  },
  "status": {
    "cluster_data": false,
    "request_time": 0.008999595418572426,
    "response": 200
  }
}</code><br>
Or if no sparsity exists for the namespace <code>{"data":{"sparsity":"null","sparsity_results_count":0},"status":{"cluster_data":false,"request_time":0.024067772552371025,"response":404}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?metrics_timestamp_resolutions</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns timestamp resolutions for each metric.<br>
                  The <code>namespace</code> and <code>remove_prefix</code> request arguments can be optionally passed to
                  filter by namespace and/or remove a namespace prefix in the the results metric names.<br>
                  <code>namespace</code> represents the top level or leading namespace elements, this is not a regex it is a startswith comparison.
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?metrics_timestamp_resolutions=true">/api?metrics_timestamp_resolutions</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?metrics_timestamp_resolutions</code><br>
                  <code>/api?metrics_timestamp_resolutions&namespace=skyline</code><br>
                  <code>/api?metrics_timestamp_resolutions&namespace=telegraf&remove_prefix=telegraf</code><br>
                  <code>/api?metrics_timestamp_resolutions&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{"data":{"timestamp_resolutions":{"skyline.thunder.skyline-1.alerts.sent":"{60: 96, 61: 3}"}},"status":{"cluster_data":false,"request_time":0.005566755309700966,"response":200}}
</code><br>
Or if no timestamp resolutions exists for the namespace <code>{"data":{"timestamp_resolutions":"null"},"status":{"cluster_data":false,"request_time":0.015810176730155945,"response":404}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?mirage_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all Mirage enabled metrics (with their FULL_NAMESPACE metric name) as a json object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?mirage_metrics">/api?mirage_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?mirage_metrics</code><br>
              <code>/api?mirage_metrics&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "metrics": [
      "metrics.test.metric",
      "metrics.vista.nodes.skyline-1.cpu.user"
    ]
  },
  "status": {}
}</code><br>
Or if no metrics if no metrics are Mirage enabled metrics <code>{"data":{"metrics":[]},"status":{}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?non_alerting_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all metrics that do not have a STMP alert defined for them as a json object.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?non_alerting_metrics">/api?non_alerting_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?non_alerting_metrics</code><br>
              <code>/api?non_alerting_metrics&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "metrics": [
      "test.metric",
      "vista.nodes.skyline-1.cpu.user"
    ]
  },
  "status": {}
}</code><br>
Or if no metrics if all metrics are set to alert <code>{"data":{"metrics":[]},"status":{}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?stale_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all metrics that are classified as stale.<br>
                  The <code>namespace</code> and <code>exclude_sparsely_populated</code> request arguments can be optionally passed to
                  filter by namespace and exclude any metrics that are classified as sparsely populated.<br>
                  <code>namespace</code> represents the top level or leading namespace elements, ths is not a regex it is a startswith comparison.
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?stale_metrics=true">/api?stale_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?stale_metrics</code><br>
                  <code>/api?stale_metrics&namespace=skyline</code><br>
                  <code>/api?stale_metrics&exclude_sparsely_populated=true</code><br>
                  <code>/api?stale_metrics&namespace=telegraf&exclude_sparsely_populated=true</code><br>
                  <code>/api?stale_metrics&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>


{
  "data": {
    "stale_metrics": {
      "namespace": "all",
      "stale_metrics": {
        "cswellsurf.buoys.cabo_begur.MeanDir": {
          "last_timestamp": 1623950777,
          "stale_for": 58916
        },
        "cswellsurf.buoys.cabo_begur.Tp": {
          "last_timestamp": 1623950777,
          "stale_for": 58916
        }
      },
      "stale_metrics_count": 2,
      "total_metrics_count": 1425
    }
  },
  "status": {
    "cluster_data": false,
    "request_time": 0.04792294651269913,
    "response": 200
  }
}</code><br>
Or if no stale metrics exists <code>{"data":{"stale_metrics":{"namespace":"cswellsurf","stale_metrics":{},"stale_metrics_count":0,"total_metrics_count":25}},"status":{"cluster_data":false,"request_time":0.0713842399418354,"response":200}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?redis_data</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the data from an allowed Redis set/hash/key.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?redis_data</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>type=[hash|set|key | str | <font color=red>required</font>]<br>
                  key=[Redis key name | str | <font color=red>required</font>]<br>
                  cluster_data=[true | bool | [optional for clustered Skyline]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?redis_data&type=hash&key=metrics_manager.flux.aggregate_namespaces</code></td>
		          <td><code>/api?redis_data&type=set&key=flux.quota.namespace_metrics.telegraf&cluster_data=true</code></td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - with json response, example
                  <code>{
  "data": {
    "metrics_manager.flux.aggregate_namespaces": {
      "skyline-test-external-settings.1": "{'interval': 60, 'last_known_value': False, 'method': ['avg'], 'method_suffix': False, 'zero_fill': False}",
      "skyline-test-external-settings.2": "{'interval': 60, 'last_known_value': False, 'method': ['avg', 'sum', 'max', 'min'], 'method_suffix': True, 'zero_fill': False}"
    }
  },
  "status": {
    "cluster_data": false,
    "request_time": 0.0012733489274978638,
    "response": 200
  }
}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?related_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>This method returns any discovered related metrics for a metric or metric_id.  Optionally a full_details parameter can be passed to return verbose info on the related_metrics<br>
              When the full_details parameter is passed the results are sorted by avg_coefficient, when full_details is not passed, the returned metric list is <strong>NOT ORDERED</strong>.
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?related_metrics</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?related_metrics&metric=[metric]</code><br>
              </td>
  		      </tr>

  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?related_metrics&metric=[metric_name]</code><br>
                  <code>/api?related_metrics&metric=[metric_name]&full_details=true</code><br>
                  <code>/api?related_metrics&metric=[metric_name]&metric_id=[metric_id]</code><br>
                  <code>/api?related_metrics&metric=[metric_name]&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>

  		      <tr>
  		        <td>Response:</td>
  		        <td>200 - json response, example: /api?related_metrics&metric=telegraf.26820.sda1.diskio.reads<br>
                  <code>
{
  "data": {
    "metric": "telegraf.26820.sda1.diskio.reads",
    "metric_id": 1160,
    "related_metrics": [
      "telegraf.26820.kernel.processes_forked",
      "telegraf.26820.cpu-total.cpu.usage_user",
      ...,
      "telegraf.26820.sda1.ext4.rw.-.disk.inodes_used"
    ],
    "status": {
      "code": 200
    }
  },
  "status": {
    "cluster_data": false,
    "request_time": 0.017428806982934475,
    "response": 200
  }
}</code><br>
              </td>
  		      </tr>

  		      <tr>
  		        <td><code>full_details</code> Response:</td>
  		        <td>200 - json response, example: /api?related_metrics&metric=telegraf.26820.sda1.diskio.reads&full_details=true<br>
                  <code>
{
  "data": {
    "metric": "telegraf.26820.sda1.diskio.reads",
    "metric_id": 1160,
    "related_metrics": {
      "telegraf.26820.kernel.processes_forked": {
        "avg_coefficient": 0.99661,
        "avg_ppscore": null,
        "avg_shifted_coefficient": 0.99661,
        "created_timestamp": "2021-09-30 15:29:42",
        "metric_id": 1160,
        "related_metric_id": 1077,
        "shifted_counts": {
          "0": 250
        },
        "timestamp": 1633015780
      },
      "telegraf.26820.cpu-total.cpu.usage_user": {
        "avg_coefficient": 0.99678,
        "avg_ppscore": null,
        "avg_shifted_coefficient": 0.99678,
        "created_timestamp": "2021-09-30 15:29:42",
        "metric_id": 1160,
        "related_metric_id": 1080,
        "shifted_counts": {
          "0": 226
        },
        "timestamp": 1633015780
      },
      ...,
      "telegraf.26820.sda1.ext4.rw.-.disk.inodes_used": {
        "avg_coefficient": 0.99203,
        "avg_ppscore": null,
        "avg_shifted_coefficient": 0.99203,
        "created_timestamp": "2021-10-01 15:55:56",
        "metric_id": 1160,
        "related_metric_id": 2364,
        "shifted_counts": {
          "0": 139
        },
        "timestamp": 1633103756
      }
    },
    "related_metrics_list": [
      "telegraf.26820.kernel.processes_forked",
      "telegraf.26820.cpu-total.cpu.usage_user",
      ...,
      "telegraf.26820.sda1.ext4.rw.-.disk.inodes_used"
    ]
  },
  "status": {
    "cluster_data": false,
    "request_time": 0.890580702573061,
    "response": 200
  }
}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">Admin method ::</span> <span class="re">/remove_namespace_quota_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Removes metrics defined in metrics or by patterns from the namespace flux quota AND removes the metrics from all Redis reources INCLUDING the metric timesereis data for the metrics and sets the metrics to inactive in the database.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/remove_namespace_quota_metrics</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>POST</td>
  		      </tr>
  		      <tr>
  		        <td>Authentication:</td>
  		        <td><font color=red>required</font>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>key=[FLUX_SELF_API_KEY | str | <font color=red>required</font>]<br>
                  parent_namespace=[top_level_namespace | str | <font color=red>required</font>]<br>
                  metrics=[list_of_base_names | list | optional]<br>
                  patterns=[list_of_patterns_to_match | list | optional]<br>
                  cluster_data=[true | boolean | optional]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request example with POST data:</td>
              <td>
              <code>curl --user WEBAPP_AUTH_USER:WEBAPP_AUTH_USER_PASSWORD -d '{"data":{"key":"FLUX_SELF_API_KEY", "namespace": "telegraf", "metrics": ["telegraf.server-1.cpu-total.cpu.usage_steal", "telegraf.server-1.cpu-total.cpu.usage_guest"]}}' -H "Content-Type: application/json" -X POST <SKYLINE_URL>/remove_namespace_quota_metrics</code><br>
              <code>curl --user WEBAPP_AUTH_USER:WEBAPP_AUTH_USER_PASSWORD -d '{"data":{"key":"FLUX_SELF_API_KEY", "namespace": "telegraf", "metrics": ["telegraf.server-1.cpu-total.cpu.usage_steal"], "patterns": ["telegraf.redis.redis_cmdstat.usec_per_call", "mysql.performance_schema"]}}' -H "Content-Type: application/json" -X POST <SKYLINE_URL>/remove_namespace_quota_metrics</code><br>
              <code>curl --user WEBAPP_AUTH_USER:WEBAPP_AUTH_USER_PASSWORD -d '{"data":{"key":"FLUX_SELF_API_KEY", "namespace": "telegraf", "patterns": ["telegraf.redis.redis_cmdstat.usec_per_call", "mysql.performance_schema"], "cluster_data": true}}' -H "Content-Type: application/json" -X POST <SKYLINE_URL>/remove_namespace_quota_metrics</code> [optional for clustered Skyline]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json responses, examples:<br>
Single response:<br>
                  <code>
</code><br>
cluster_data response:<br>
<code>
</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?test_alert</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Adds a test alert for a metric, app and alerter.
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?test_alert&metric=[base_name | str]&app=[app | str]&alerter=[alerter | str]&alerter_id=[alerter_id (optional) | int ]&trigger_anomaly=[false (optional and ONLY available for mirage) | boolean ]</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?test_alert&metric=test.metric&app=mirage&alerter=slack</code>
              </td>
		          <td><code>/api?test_alert&metric=test.metric&app=mirage&alerter=slack&alerter_id=143</code> (optional alerter_id if from external alert settings)
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{"data":{"test alert added":true,"metric":"test.metric","app":"mirage","alerter":"slack"},"status":{"response":200}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">Admin method ::</span> <span class="re">/api?thunder_no_data_remove_namespace</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>This is a <strong>Admin</strong> method to remove a top level namespace for the thunder no_data check.  Internal this removes all metrics starting with the passed namespace from the <code>analyzer.metrics.last_timeseries_timestamp</code> Redis hash key.
              If metrics stop for a top level namespace and they are expected to have stopped, the namespace can be removed to silence the no_data Thunder alerts in the next Thunder run.<br>
              Optionally expiry can be passed to silence any repeated alerts, if not passed the default of 3600 is used.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?thunder_no_data_remove_namespace</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?thunder_no_data_remove_namespace&namespace=[top_level_namespace]</code><br>
		          <code>/api?thunder_no_data_remove_namespace&namespace=[top_level_namespace]&expiry=86400</code><br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "namespace": "test123",
    "remove_namespace_from_no_data_check": true
  },
  "status": {}
}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?training_data</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all metrics and their anomaly timestamps which have training data.<br>
                  The <code>metric</code> and <code>timestamp</code> request arguments can be added to
                  filter by metric, namespace, timestamp or by metric and timestamp.
                  You can also use part of namespace as the <code>metric</code> and all metrics that match the namespace will be returned
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?training_data">/api?training_data</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?training_data</code><br>
                  <code>/api?training_data&metric=[metric_name]</code><br>
                  <code>/api?training_data&timestamp=[timestamp]</code><br>
                  <code>/api?training_data&metric=[metric_name]&amp;timestamp=[timestamp]</code><br>
                  <code>/api?training_data&cluster_data=true</code> [optional for clustered Skyline]
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
    "data": {
        "metrics": [
            [
                "remote_hosts.graphite-labs_wikimedia_org.cloudinfra.cloudinfra-db01.cpu.total.idle",
                1586521095
            ],
            [
                "remote_hosts.graphite-labs_wikimedia_org.cloudinfra.cloudinfra-db01.cpu.total.iowait",
                1586521155
            ]
        ]
    },
    "status": {}
}</code><br>
Or if no metrics with training data are present <code>{"data":{"metrics":[]},"status":{}}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>


	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?unique_metrics</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns a list of all metrics (with their FULL_NAMESPACE metric name) as a json object.
              Optionally you can filter on namepsace elements and remove the FULL_NAMESPACE</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td><a target='_blank' href="/api?unique_metrics">/api?unique_metrics</a></td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Request example:</td>
		          <td><code>/api?unique_metrics</code><br>
              <code>/api?unique_metrics&cluster_data=true</code> [optional for clustered Skyline]<br>
              <code>/api?unique_metrics&filter_namespace=[namespace elements]</code> [optional]<br>
              <code>/api?unique_metrics&remove_full_namespace_prefix=true</code> [optional]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json response, example
                  <code>
{
  "data": {
    "metrics": [
      "metrics.test.metric",
      "metrics.vista.nodes.skyline-1.cpu.user"
    ]
  },
  "status": {}
}</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">API method ::</span> <span class="re">/api?yhat_values</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Returns the yhat values (mean and value OPTIONAL) for a metric timeseries as a json object<br>
              yhat values default to the upper and lower three-sigma boundaries.<br>
              If any custom algorithms are in use the three-sigma yhat upper and lower vlues are replaced with the value (+/- 10%) which the custom algorithm did not trigger on<br>
              Where the customa algorithm replaces the three-sigma value in the yhat_upper or yhat_lower elements, a 3sigma_lower or 3sigma_upper will also be returned in the element
              </td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/api?yhat_values</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>GET</td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>yhat_values=[true | boolean | <font color=red>required</font>]<br>
                  metric=[metric name | str | <font color=red>required</font>]<br>
                  from=[unix timestamp | str | <font color=red>required</font>]<br>
                  until=[unix timestamp | str | <font color=red>required</font>]<br>
                  include_value=[false | boolean | optional defaults to false]<br>
                  include_mean=[false | boolean | optional defaults to false]<br>
                  include_yhat_real_lower=[false | boolean | optional defaults to false]<br>
                  include_anomalous_periods=[false | boolean | optional defaults to false]<br>
                  remove_prefix=[str | optional] - prefix string to remove (do not pass a trailing dot)<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request examples:</td>
		          <td><code>/api?yhat_values=true&metric=vista.demo_robustperception_io.prometheus.node_load1&from=1606147200&until=1606750440</code> only returns timestamps, yhat_upper and yhat_lower vlaues per timestamp<br>
		          <code>/api?yhat_values=true&metric=vista.demo_robustperception_io.prometheus.node_load1&from=1606147200&until=1606750440&include_yhat_real_lower=true&include_mean=true&include_value=true</code> only returns timestamps, yhat_upper, yhat_lower and yhat_real_lower (will not drop below 0 if the metric does not)<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 with json response<br>
<code>{
  "data": {
    "metric": "vista.demo_robustperception_io.prometheus.node_load1",
    "yhat_values": {
      "1606147260": {
        "yhat_lower": 1.2,
        "yhat_upper": 1.2
      },
      "1606147320": {
        "yhat_lower": 1.2,
        "yhat_upper": 1.2
      },...
      "1606750440": {
        "yhat_lower": 0.8529541536511133,
        "yhat_upper": 1.491394364351672
      }
    }
  },
  "status": {
    "request_time": "0.587132",
    "response": 200
  }
}</code><br>
With value, mean and yhat_real_lower passed
<code>{
  "data": {
    "metric": "vista.demo_robustperception_io.prometheus.node_load1",
    "yhat_values": {
      "1606147260": {
        "mean": 1.2,
        "value": 1.2,
        "yhat_lower": 1.2,
        "yhat_real_lower": 1.2,
        "yhat_upper": 1.2
      },
      "1606147320": {
        "mean": 1.2,
        "value": 1.2,
        "yhat_lower": 1.2,
        "yhat_real_lower": 1.2,
        "yhat_upper": 1.2
      },...
      "1606750440": {
        "mean": 1.1721742590013926,
        "value": 1.27,
        "yhat_lower": 0.8529541536511133,
        "yhat_real_lower": 0.8529541536511133,
        "yhat_upper": 1.491394364351672
      }
    }
  },
  "status": {
    "request_time": "0.579628",
    "response": 200
  }
}</code<br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

	  <h4><span class="logo"><span class="sky">Admin method ::</span> <span class="re">/update_external_settings</span></span></h4>
  		  <table class="table table-hover">
  		    <thead>
  		      <tr>
  		        <th>Name</th>
  		        <th>Description</th>
  		      </tr>
  		    </thead>
  		    <tbody>
  		      <tr>
  		        <td>Description:</td>
  		        <td>Updates Skyline external settings Redis data from EXTERNAL_SETTINGS endpoints and reloads flux processes.</td>
  		      </tr>
  		      <tr>
  		        <td>Endpoint:</td>
  		        <td>/update_external_settings</td>
  		      </tr>
  		      <tr>
  		        <td>Method:</td>
  		        <td>POST</td>
  		      </tr>
  		      <tr>
  		        <td>Authentication:</td>
  		        <td><font color=red>required</font>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Parameters:</td>
  		        <td>key=[FLUX_SELF_API_KEY | str | <font color=red>required</font>]<br>
                  cluster_data=[true | boolean | optional]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Request example with POST data:</td>
              <td>
              <code>curl --user WEBAPP_AUTH_USER:WEBAPP_AUTH_USER_PASSWORD -d '{"data":{"key":"FLUX_SELF_API_KEY"}}' -H "Content-Type: application/json" -X POST <SKYLINE_URL>/update_external_settings</code><br>
              <code>curl --user WEBAPP_AUTH_USER:WEBAPP_AUTH_USER_PASSWORD -d '{"data":{"key":"FLUX_SELF_API_KEY"},"cluster_data":true}' -H "Content-Type: application/json" -X POST <SKYLINE_URL>/update_external_settings</code> [optional for clustered Skyline]<br>
              </td>
  		      </tr>
  		      <tr>
  		        <td>Responses:</td>
  		        <td>200 - json responses, examples:<br>
Single response:<br>
                  <code>
{"data":{"updated":true},"status":{"request_time":9.607258634001482,"response":200,"update_external_settings":"success"}}
</code><br>
cluster_data response:<br>
<code>
{"data":{"remote_external_settings":[true,true],"updated":true},"status":{"request_time":13.784328731002376,"response":200,"update_external_settings":"success"}}
</code><br>
              </td>
  		      </tr>
		    </tbody>
		  </table>

<!-- END /api block -->
{% endblock %}
